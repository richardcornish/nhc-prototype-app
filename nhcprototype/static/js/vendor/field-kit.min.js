(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.FieldKit=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(_dereq_,module,exports){var process=module.exports={};var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=setTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;clearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){setTimeout(drainQueue,0)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}],2:[function(_dereq_,module,exports){(function(process){(function(global,factory){if(typeof define==="function"&&define.amd){define("InputSim",["exports"],factory)}else if(typeof exports!=="undefined"){factory(exports)}else{var mod={exports:{}};factory(mod.exports);global.InputSim=mod.exports}})(this,function(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var A=65;var Y=89;var Z=90;var ZERO=48;var NINE=57;var LEFT=37;var RIGHT=39;var UP=38;var DOWN=40;var BACKSPACE=8;var DELETE=46;var TAB=9;var ENTER=13;var KEYS={A:A,Y:Y,Z:Z,ZERO:ZERO,NINE:NINE,LEFT:LEFT,RIGHT:RIGHT,UP:UP,DOWN:DOWN,BACKSPACE:BACKSPACE,DELETE:DELETE,TAB:TAB,ENTER:ENTER,isDigit:function isDigit(keyCode){return ZERO<=keyCode&&keyCode<=NINE},isDirectional:function isDirectional(keyCode){return keyCode===LEFT||keyCode===RIGHT||keyCode===UP||keyCode===DOWN}};var CTRL=1<<0;var META=1<<1;var ALT=1<<2;var SHIFT=1<<3;var cache={};function keyBindingsForPlatform(platform){var osx=platform==="OSX";var ctrl=osx?META:CTRL;if(!cache[platform]){cache[platform]=build(function(bind){bind(A,ctrl,"selectAll");bind(LEFT,null,"moveLeft");bind(LEFT,ALT,"moveWordLeft");bind(LEFT,SHIFT,"moveLeftAndModifySelection");bind(LEFT,ALT|SHIFT,"moveWordLeftAndModifySelection");bind(RIGHT,null,"moveRight");bind(RIGHT,ALT,"moveWordRight");bind(RIGHT,SHIFT,"moveRightAndModifySelection");bind(RIGHT,ALT|SHIFT,"moveWordRightAndModifySelection");bind(UP,null,"moveUp");bind(UP,ALT,"moveToBeginningOfParagraph");bind(UP,SHIFT,"moveUpAndModifySelection");bind(UP,ALT|SHIFT,"moveParagraphBackwardAndModifySelection");bind(DOWN,null,"moveDown");bind(DOWN,ALT,"moveToEndOfParagraph");bind(DOWN,SHIFT,"moveDownAndModifySelection");bind(DOWN,ALT|SHIFT,"moveParagraphForwardAndModifySelection");bind(BACKSPACE,null,"deleteBackward");bind(BACKSPACE,SHIFT,"deleteBackward");bind(BACKSPACE,ALT,"deleteWordBackward");bind(BACKSPACE,ALT|SHIFT,"deleteWordBackward");bind(BACKSPACE,ctrl,"deleteBackwardToBeginningOfLine");bind(BACKSPACE,ctrl|SHIFT,"deleteBackwardToBeginningOfLine");bind(DELETE,null,"deleteForward");bind(DELETE,ALT,"deleteWordForward");bind(TAB,null,"insertTab");bind(TAB,SHIFT,"insertBackTab");bind(ENTER,null,"insertNewline");bind(Z,ctrl,"undo");if(osx){bind(LEFT,META,"moveToBeginningOfLine");bind(LEFT,META|SHIFT,"moveToBeginningOfLineAndModifySelection");bind(RIGHT,META,"moveToEndOfLine");bind(RIGHT,META|SHIFT,"moveToEndOfLineAndModifySelection");bind(UP,META,"moveToBeginningOfDocument");bind(UP,META|SHIFT,"moveToBeginningOfDocumentAndModifySelection");bind(DOWN,META,"moveToEndOfDocument");bind(DOWN,META|SHIFT,"moveToEndOfDocumentAndModifySelection");bind(BACKSPACE,CTRL,"deleteBackwardByDecomposingPreviousCharacter");bind(BACKSPACE,CTRL|SHIFT,"deleteBackwardByDecomposingPreviousCharacter");bind(Z,META|SHIFT,"redo")}else{bind(Y,CTRL,"redo")}})}return cache[platform]}function build(callback){var result=new BindingSet;callback(function(){return result.bind.apply(result,arguments)});return result}var BindingSet=function(){function BindingSet(){_classCallCheck(this,BindingSet);this.bindings={}}_createClass(BindingSet,[{key:"bind",value:function bind(keyCode,modifiers,action){if(!this.bindings[keyCode]){this.bindings[keyCode]={}}this.bindings[keyCode][modifiers||0]=action}},{key:"actionForEvent",value:function actionForEvent(event){var bindingsForKeyCode=this.bindings[event.keyCode];if(bindingsForKeyCode){var modifiers=0;if(event.altKey){modifiers|=ALT}if(event.ctrlKey){modifiers|=CTRL}if(event.metaKey){modifiers|=META}if(event.shiftKey){modifiers|=SHIFT}return bindingsForKeyCode[modifiers]}}}]);return BindingSet}();var Affinity={UPSTREAM:0,DOWNSTREAM:1,NONE:null};function isWordChar(chr){return chr&&/^\w$/.test(chr)}function hasLeftWordBreakAtIndex(text,index){if(index===0){return true}else{return!isWordChar(text[index-1])&&isWordChar(text[index])}}function hasRightWordBreakAtIndex(text,index){if(index===text.length-1){return true}else{return isWordChar(text[index])&&!isWordChar(text[index+1])}}var Input=function(){function Input(value,range){_classCallCheck(this,Input);this._value="";this._selectedRange={start:0,length:0};this.shouldCancelEvents=true;this.selectionAffinity=Affinity.NONE;if(value){this.setText(value)}if(range){this.setSelectedRange(range)}this._buildKeybindings()}_createClass(Input,[{key:"clearSelection",value:function clearSelection(){this.replaceSelection("")}},{key:"deleteBackward",value:function deleteBackward(event){this._handleEvent(event);var range=this.selectedRange();if(range.length===0){range.start--;range.length++;this.setSelectedRange(range)}this.clearSelection()}},{key:"deleteWordBackward",value:function deleteWordBackward(event){if(this.hasSelection()){this.deleteBackward(event)}else{this._handleEvent(event);var range=this.selectedRange();var start=this._lastWordBreakBeforeIndex(range.start);range.length+=range.start-start;range.start=start;this.setSelectedRange(range);this.clearSelection()}}},{key:"deleteBackwardByDecomposingPreviousCharacter",value:function deleteBackwardByDecomposingPreviousCharacter(event){this.deleteBackward(event)}},{key:"deleteBackwardToBeginningOfLine",value:function deleteBackwardToBeginningOfLine(event){if(this.hasSelection()){this.deleteBackward(event)}else{this._handleEvent(event);var range=this.selectedRange();range.length=range.start;range.start=0;this.setSelectedRange(range);this.clearSelection()}}},{key:"deleteForward",value:function deleteForward(event){this._handleEvent(event);var range=this.selectedRange();if(range.length===0){range.length++;this.setSelectedRange(range)}this.clearSelection()}},{key:"deleteWordForward",value:function deleteWordForward(event){if(this.hasSelection()){return this.deleteForward(event)}else{this._handleEvent(event);var range=this.selectedRange();var end=this._nextWordBreakAfterIndex(range.start+range.length);this.setSelectedRange({start:range.start,length:end-range.start});this.clearSelection()}}},{key:"handleEvent",value:function handleEvent(event){if(typeof event==="undefined"){throw new Error("cannot handle and event that isn't passed")}var action=this._bindings.actionForEvent(event);if(action)this[action](event);return action}},{key:"hasSelection",value:function hasSelection(){return this.selectedRange().length!==0}},{key:"insertBackTab",value:function insertBackTab(){}},{key:"insertNewline",value:function insertNewline(){}},{key:"insertTab",value:function insertTab(){}},{key:"insertText",value:function insertText(text){var range;if(this.hasSelection()){this.clearSelection()}this.replaceSelection(text);range=this.selectedRange();range.start+=range.length;range.length=0;this.setSelectedRange(range)}},{key:"moveUp",value:function moveUp(event){this._handleEvent(event);this.setSelectedRange({start:0,length:0})}},{key:"moveToBeginningOfParagraph",value:function moveToBeginningOfParagraph(event){this.moveUp(event)}},{key:"moveUpAndModifySelection",value:function moveUpAndModifySelection(event){this._handleEvent(event);var range=this.selectedRange();switch(this.selectionAffinity){case Affinity.UPSTREAM:case Affinity.NONE:range.length+=range.start;range.start=0;break;case Affinity.DOWNSTREAM:range.length=range.start;range.start=0;break}this.setSelectedRangeWithAffinity(range,Affinity.UPSTREAM)}},{key:"moveParagraphBackwardAndModifySelection",value:function moveParagraphBackwardAndModifySelection(event){this._handleEvent(event);var range=this.selectedRange();switch(this.selectionAffinity){case Affinity.UPSTREAM:case Affinity.NONE:range.length+=range.start;range.start=0;break;case Affinity.DOWNSTREAM:range.length=0;break}this.setSelectedRangeWithAffinity(range,Affinity.UPSTREAM)}},{key:"moveToBeginningOfDocument",value:function moveToBeginningOfDocument(event){this.moveToBeginningOfLine(event)}},{key:"moveToBeginningOfDocumentAndModifySelection",value:function moveToBeginningOfDocumentAndModifySelection(event){this._handleEvent(event);var range=this.selectedRange();range.length+=range.start;range.start=0;this.setSelectedRangeWithAffinity(range,Affinity.UPSTREAM)}},{key:"moveDown",value:function moveDown(event){this._handleEvent(event);var range={start:this.text().length,length:0};this.setSelectedRangeWithAffinity(range,Affinity.NONE)}},{key:"moveToEndOfParagraph",value:function moveToEndOfParagraph(event){this.moveDown(event)}},{key:"moveDownAndModifySelection",value:function moveDownAndModifySelection(event){this._handleEvent(event);var range=this.selectedRange();var end=this.text().length;if(this.selectionAffinity===Affinity.UPSTREAM){range.start+=range.length}range.length=end-range.start;this.setSelectedRangeWithAffinity(range,Affinity.DOWNSTREAM)}},{key:"moveParagraphForwardAndModifySelection",value:function moveParagraphForwardAndModifySelection(event){this._handleEvent(event);var range=this.selectedRange();switch(this.selectionAffinity){case Affinity.DOWNSTREAM:case Affinity.NONE:range.length=this.text().length-range.start;break;case Affinity.UPSTREAM:range.start+=range.length;range.length=0;break}this.setSelectedRangeWithAffinity(range,Affinity.DOWNSTREAM)}},{key:"moveToEndOfDocument",value:function moveToEndOfDocument(event){this.moveToEndOfLine(event)}},{key:"moveToEndOfDocumentAndModifySelection",value:function moveToEndOfDocumentAndModifySelection(event){this._handleEvent(event);var range=this.selectedRange();range.length=this.text().length-range.start;this.setSelectedRangeWithAffinity(range,Affinity.DOWNSTREAM)}},{key:"moveLeft",value:function moveLeft(event){this._handleEvent(event);var range=this.selectedRange();if(range.length!==0){range.length=0}else{range.start--}this.setSelectedRangeWithAffinity(range,Affinity.NONE)}},{key:"moveLeftAndModifySelection",value:function moveLeftAndModifySelection(event){this._handleEvent(event);var range=this.selectedRange();switch(this.selectionAffinity){case Affinity.UPSTREAM:case Affinity.NONE:this.selectionAffinity=Affinity.UPSTREAM;range.start--;range.length++;break;case Affinity.DOWNSTREAM:range.length--;break}this.setSelectedRange(range)}},{key:"moveWordLeft",value:function moveWordLeft(event){this._handleEvent(event);var index=this._lastWordBreakBeforeIndex(this.selectedRange().start-1);this.setSelectedRange({start:index,length:0})}},{key:"moveWordLeftAndModifySelection",value:function moveWordLeftAndModifySelection(event){this._handleEvent(event);var range=this.selectedRange();switch(this.selectionAffinity){case Affinity.UPSTREAM:case Affinity.NONE:this.selectionAffinity=Affinity.UPSTREAM;var start=this._lastWordBreakBeforeIndex(range.start-1);range.length+=range.start-start;range.start=start;break;case Affinity.DOWNSTREAM:var end=this._lastWordBreakBeforeIndex(range.start+range.length);if(end<range.start){end=range.start}range.length-=range.start+range.length-end;break}this.setSelectedRange(range)}},{key:"moveToBeginningOfLine",value:function moveToBeginningOfLine(event){this._handleEvent(event);this.setSelectedRange({start:0,length:0})}},{key:"moveToBeginningOfLineAndModifySelection",value:function moveToBeginningOfLineAndModifySelection(event){this._handleEvent(event);var range=this.selectedRange();range.length+=range.start;range.start=0;this.setSelectedRangeWithAffinity(range,Affinity.UPSTREAM)}},{key:"moveRight",value:function moveRight(event){this._handleEvent(event);var range=this.selectedRange();if(range.length!==0){range.start+=range.length;range.length=0}else{range.start++}this.setSelectedRangeWithAffinity(range,Affinity.NONE)}},{key:"moveRightAndModifySelection",value:function moveRightAndModifySelection(event){this._handleEvent(event);var range=this.selectedRange();switch(this.selectionAffinity){case Affinity.UPSTREAM:range.start++;range.length--;break;case Affinity.DOWNSTREAM:case Affinity.NONE:this.selectionAffinity=Affinity.DOWNSTREAM;range.length++;break}this.setSelectedRange(range)}},{key:"moveWordRight",value:function moveWordRight(event){this._handleEvent(event);var range=this.selectedRange();var index=this._nextWordBreakAfterIndex(range.start+range.length);this.setSelectedRange({start:index,length:0})}},{key:"moveWordRightAndModifySelection",value:function moveWordRightAndModifySelection(event){this._handleEvent(event);var range=this.selectedRange();var start=range.start;var end=range.start+range.length;switch(this.selectionAffinity){case Affinity.UPSTREAM:start=Math.min(this._nextWordBreakAfterIndex(start),end);break;case Affinity.DOWNSTREAM:case Affinity.NONE:this.selectionAffinity=Affinity.DOWNSTREAM;end=this._nextWordBreakAfterIndex(range.start+range.length);break}this.setSelectedRange({start:start,length:end-start})}},{key:"moveToEndOfLine",value:function moveToEndOfLine(event){this._handleEvent(event);this.setSelectedRange({start:this.text().length,length:0})}},{key:"moveToEndOfLineAndModifySelection",value:function moveToEndOfLineAndModifySelection(event){this._handleEvent(event);var range=this.selectedRange();range.length=this.text().length-range.start;this.setSelectedRangeWithAffinity(range,Affinity.DOWNSTREAM)}},{key:"replaceSelection",value:function replaceSelection(replacement){var range=this.selectedRange();var end=range.start+range.length;var text=this.text();text=text.substring(0,range.start)+replacement+text.substring(end);range.length=replacement.length;this.setText(text);this.setSelectedRangeWithAffinity(range,Affinity.NONE)}},{key:"rightWordBreakIndexes",value:function rightWordBreakIndexes(){var result=[];var text=this.text();for(var i=0,l=text.length;i<l;i++){if(hasRightWordBreakAtIndex(text,i)){result.push(i+1)}}return result}},{key:"selectAll",value:function selectAll(event){this._handleEvent(event);this.setSelectedRangeWithAffinity({start:0,length:this.text().length},Affinity.NONE)}},{key:"text",value:function text(){return this._value}},{key:"setText",value:function setText(value){this._value=""+value;this.setSelectedRange({start:this._value.length,length:0})}},{key:"selectedRange",value:function selectedRange(){return this._selectedRange}},{key:"setSelectedRange",value:function setSelectedRange(range){this.setSelectedRangeWithAffinity(range,this.selectionAffinity)}},{key:"setSelectedRangeWithAffinity",value:function setSelectedRangeWithAffinity(range,affinity){var min=0;var max=this.text().length;var caret={start:Math.max(min,Math.min(max,range.start)),end:Math.max(min,Math.min(max,range.start+range.length))};this._selectedRange={start:caret.start,length:caret.end-caret.start};this.selectionAffinity=range.length===0?Affinity.NONE:affinity;return this._selectedRange}},{key:"selectionAnchor",value:function selectionAnchor(){var range=this.selectedRange();switch(this.selectionAffinity){case Affinity.UPSTREAM:return range.start+range.length;case Affinity.DOWNSTREAM:return range.start;default:return Affinity.NONE}}},{key:"_buildKeybindings",value:function _buildKeybindings(){var osx;if(typeof navigator!=="undefined"){osx=/^Mozilla\/[\d\.]+ \(Macintosh/.test(navigator.userAgent)}else if(typeof process!=="undefined"){osx=/darwin/.test(process.platform)}this._bindings=keyBindingsForPlatform(osx?"OSX":"Default")}},{key:"_handleEvent",value:function _handleEvent(event){if(event&&this.shouldCancelEvents){event.preventDefault()}}},{key:"_lastWordBreakBeforeIndex",value:function _lastWordBreakBeforeIndex(index){var indexes=this._leftWordBreakIndexes();var result=indexes[0];for(var i=0,l=indexes.length;i<l;i++){var wordBreakIndex=indexes[i];if(index>wordBreakIndex){result=wordBreakIndex}else{break}}return result}},{key:"_leftWordBreakIndexes",value:function _leftWordBreakIndexes(){var result=[];var text=this.text();for(var i=0,l=text.length;i<l;i++){if(hasLeftWordBreakAtIndex(text,i)){result.push(i)}}return result}},{key:"_nextWordBreakAfterIndex",value:function _nextWordBreakAfterIndex(index){var indexes=this.rightWordBreakIndexes().reverse();var result=indexes[0];for(var i=0,l=indexes.length;i<l;i++){var wordBreakIndex=indexes[i];if(index<wordBreakIndex){result=wordBreakIndex}else{break}}return result}}]);return Input}();exports.Input=Input;exports.KEYS=KEYS;exports.keyBindingsForPlatform=keyBindingsForPlatform})}).call(this,_dereq_("_process"))},{_process:1}],3:[function(_dereq_,module,exports){(function(global,factory){if(typeof define==="function"&&define.amd){define("stround",["exports"],factory)}else if(typeof exports!=="undefined"){factory(exports)}else{var mod={exports:{}};factory(mod.exports);global.stround=mod.exports}})(this,function(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();exports.parse=parse;exports.format=format;exports.shiftParts=shiftParts;exports.shift=shift;exports.round=round;var modes={CEILING:0,FLOOR:1,DOWN:2,UP:3,HALF_EVEN:4,HALF_DOWN:5,HALF_UP:6};exports.modes=modes;var NEG="-";var SEP=".";var NEG_PATTERN="-";var SEP_PATTERN="\\.";var NUMBER_PATTERN=new RegExp("^("+NEG_PATTERN+")?(\\d*)(?:"+SEP_PATTERN+"(\\d*))?$");function increment(strint){var length=strint.length;if(length===0){return"1"}var last=parseInt(strint[length-1],10);if(last===9){return increment(strint.slice(0,length-1))+"0"}else{return strint.slice(0,length-1)+(last+1)}}function parse(strnum){switch(strnum){case"NaN":case"Infinity":case"-Infinity":return null}var match=strnum.match(NUMBER_PATTERN);if(!match){throw new Error("cannot round malformed number: "+strnum)}return[match[1]!==undefined,match[2],match[3]||""]}function format(_ref){var _ref2=_slicedToArray(_ref,3);var negative=_ref2[0];var intPart=_ref2[1];var fracPart=_ref2[2];if(intPart.length===0){intPart="0"}else{var firstNonZeroIndex=undefined;for(firstNonZeroIndex=0;firstNonZeroIndex<intPart.length;firstNonZeroIndex++){if(intPart[firstNonZeroIndex]!=="0"){break}}if(firstNonZeroIndex!==intPart.length){intPart=intPart.slice(firstNonZeroIndex)}}return(negative?NEG+intPart:intPart)+(fracPart.length?SEP+fracPart:"")}function shiftParts(_ref3,exponent){var _ref32=_slicedToArray(_ref3,3);var negative=_ref32[0];var intPart=_ref32[1];var fracPart=_ref32[2];var partToMove=undefined;if(exponent>0){partToMove=fracPart.slice(0,exponent);while(partToMove.length<exponent){partToMove+="0"}intPart+=partToMove;fracPart=fracPart.slice(exponent)}else if(exponent<0){while(intPart.length<-exponent){intPart="0"+intPart}partToMove=intPart.slice(intPart.length+exponent);fracPart=partToMove+fracPart;intPart=intPart.slice(0,intPart.length-partToMove.length)}return[negative,intPart,fracPart]}function shift(strnum,exponent){if(typeof strnum==="number"){strnum=""+strnum}var parsed=parse(strnum);if(parsed===null){return strnum}else{return format(shiftParts(parsed,exponent))}}function round(strnum,precision,mode){if(typeof strnum==="number"){strnum=""+strnum}if(typeof strnum!=="string"){throw new Error("expected a string or number, got: "+strnum)}if(strnum.length===0){return strnum}if(precision===null||precision===undefined){precision=0}if(mode===undefined){mode=modes.HALF_EVEN}var parsed=parse(strnum);if(parsed===null){return strnum}if(precision>0){parsed=shiftParts(parsed,precision)}var _parsed=parsed;var _parsed2=_slicedToArray(_parsed,3);var negative=_parsed2[0];var intPart=_parsed2[1];var fracPart=_parsed2[2];switch(mode){case modes.CEILING:case modes.FLOOR:case modes.UP:var foundNonZeroDigit=false;for(var i=0,_length=fracPart.length;i<_length;i++){if(fracPart[i]!=="0"){foundNonZeroDigit=true;break}}if(foundNonZeroDigit){if(mode===modes.UP||negative!==(mode===modes.CEILING)){intPart=increment(intPart)}}break;case modes.HALF_EVEN:case modes.HALF_DOWN:case modes.HALF_UP:var shouldRoundUp=false;var firstFracPartDigit=parseInt(fracPart[0],10);if(firstFracPartDigit>5){shouldRoundUp=true}else if(firstFracPartDigit===5){if(mode===modes.HALF_UP){shouldRoundUp=true}if(!shouldRoundUp){for(var i=1,_length2=fracPart.length;i<_length2;i++){if(fracPart[i]!=="0"){shouldRoundUp=true;break}}}if(!shouldRoundUp&&mode===modes.HALF_EVEN){var lastIntPartDigit=parseInt(intPart[intPart.length-1],10);shouldRoundUp=lastIntPartDigit%2!==0}}if(shouldRoundUp){intPart=increment(intPart)}break}return format(shiftParts([negative,intPart,""],-precision))}})},{}],4:[function(_dereq_,module,exports){(function(window){var rootElement=window.document.documentElement;window.checkAndTriggerAutoFillEvent=function(els){els=this.nodeName==="INPUT"?[this]:els;var i,el;for(i=0;i<els.length;i++){el=els[i];if(!valueMarked(el)){markValue(el);triggerChangeEvent(el)}}};addGlobalEventListener("change",markValue);HTMLInputElement.prototype.checkAndTriggerAutoFillEvent=window.checkAndTriggerAutoFillEvent;addGlobalEventListener("blur",function(target){window.setTimeout(function(){window.checkAndTriggerAutoFillEvent(findParentForm(target).querySelectorAll("input"))},20)});function DOMContentLoadedListener(){forEach(document.getElementsByTagName("input"),markValue);window.setTimeout(function(){window.checkAndTriggerAutoFillEvent(rootElement.querySelectorAll("input"))},200)}if(!window.document.addEventListener){window.document.attachEvent("DOMContentLoaded",DOMContentLoadedListener)}else{window.document.addEventListener("DOMContentLoaded",DOMContentLoadedListener,false)}function valueMarked(el){if(!("$$currentValue"in el)){el.$$currentValue=el.getAttribute("value")}var val=el.value,$$currentValue=el.$$currentValue;if(!val&&!$$currentValue){return true}return val===$$currentValue}function markValue(el){el.$$currentValue=el.value}function addValueChangeByJsListener(listener){var jq=window.jQuery||window.angular.element,jqProto=jq.prototype;var _val=jqProto.val;jqProto.val=function(newValue){var res=_val.apply(this,arguments);if(arguments.length>0){forEach(this,function(el){listener(el,newValue)})}return res}}function addGlobalEventListener(eventName,listener){if(!rootElement.addEventListener){rootElement.attachEvent(eventName,onEvent)}else{rootElement.addEventListener(eventName,onEvent,true)}function onEvent(event){var target=event.target;listener(target)}}function findParentForm(el){while(el){if(el.nodeName==="FORM"){return el}el=el.parentNode}return null}function forEach(arr,listener){if(arr.forEach){return arr.forEach(listener)}var i;for(i=0;i<arr.length;i++){listener(arr[i])}}function triggerChangeEvent(element){var doc=window.document;var event=doc.createEvent("HTMLEvents");event.initEvent("change",true,true);element.dispatchEvent(event)}})(window)},{}],5:[function(_dereq_,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _amex_card_formatter=_dereq_("./amex_card_formatter");var _amex_card_formatter2=_interopRequireDefault(_amex_card_formatter);var _default_card_formatter=_dereq_("./default_card_formatter");var _default_card_formatter2=_interopRequireDefault(_default_card_formatter);var _card_utils=_dereq_("./card_utils");var AdaptiveCardFormatter=function(){function AdaptiveCardFormatter(){_classCallCheck(this,AdaptiveCardFormatter);this.amexCardFormatter=new _amex_card_formatter2["default"];this.defaultCardFormatter=new _default_card_formatter2["default"];this.formatter=this.defaultCardFormatter}_createClass(AdaptiveCardFormatter,[{key:"format",value:function format(pan){return this._formatterForPan(pan).format(pan)}},{key:"parse",value:function parse(text,error){return this.formatter.parse(text,error)}},{key:"isChangeValid",value:function isChangeValid(change,error){this.formatter=this._formatterForPan(change.proposed.text);return this.formatter.isChangeValid(change,error)}},{key:"_formatterForPan",value:function _formatterForPan(pan){if((0,_card_utils.determineCardType)(pan.replace(/[^\d]+/g,""))===_card_utils.AMEX){return this.amexCardFormatter}else{return this.defaultCardFormatter}}}]);return AdaptiveCardFormatter}();exports["default"]=AdaptiveCardFormatter;module.exports=exports["default"]},{"./amex_card_formatter":6,"./card_utils":8,"./default_card_formatter":10}],6:[function(_dereq_,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;desc=parent=getter=undefined;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x=parent;_x2=property;_x3=receiver;_again=true;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _default_card_formatter=_dereq_("./default_card_formatter");var _default_card_formatter2=_interopRequireDefault(_default_card_formatter);var AmexCardFormatter=function(_DefaultCardFormatter){_inherits(AmexCardFormatter,_DefaultCardFormatter);function AmexCardFormatter(){_classCallCheck(this,AmexCardFormatter);_get(Object.getPrototypeOf(AmexCardFormatter.prototype),"constructor",this).apply(this,arguments)}_createClass(AmexCardFormatter,[{key:"hasDelimiterAtIndex",value:function hasDelimiterAtIndex(index){return index===4||index===11}},{key:"maximumLength",get:function get(){return 15+2}}]);return AmexCardFormatter}(_default_card_formatter2["default"]);exports["default"]=AmexCardFormatter;module.exports=exports["default"]},{"./default_card_formatter":10}],7:[function(_dereq_,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;desc=parent=getter=undefined;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x=parent;_x2=property;_x3=receiver;_again=true;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){
if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _text_field=_dereq_("./text_field");var _text_field2=_interopRequireDefault(_text_field);var _adaptive_card_formatter=_dereq_("./adaptive_card_formatter");var _adaptive_card_formatter2=_interopRequireDefault(_adaptive_card_formatter);var _card_utils=_dereq_("./card_utils");var CardMaskStrategy={None:"None",DoneEditing:"DoneEditing"};var CardTextField=function(_TextField){_inherits(CardTextField,_TextField);function CardTextField(element){_classCallCheck(this,CardTextField);_get(Object.getPrototypeOf(CardTextField.prototype),"constructor",this).call(this,element,new _adaptive_card_formatter2["default"]);this.setCardMaskStrategy(CardMaskStrategy.None);this._masked=false;this._editing=false}_createClass(CardTextField,[{key:"cardType",value:function cardType(){return(0,_card_utils.determineCardType)(this.value())}},{key:"cardMaskStrategy",value:function cardMaskStrategy(){return this._cardMaskStrategy}},{key:"setCardMaskStrategy",value:function setCardMaskStrategy(cardMaskStrategy){if(cardMaskStrategy!==this._cardMaskStrategy){this._cardMaskStrategy=cardMaskStrategy;this._syncMask()}}},{key:"cardMask",value:function cardMask(){var text=this.text();var last4=text.slice(-4);var toMask=text.slice(0,-4);return toMask.replace(/\d/g,"•")+last4}},{key:"text",value:function text(){if(this._masked){return this._unmaskedText}else{return _get(Object.getPrototypeOf(CardTextField.prototype),"text",this).call(this)}}},{key:"setText",value:function setText(text){if(this._masked){this._unmaskedText=text;text=this.cardMask()}_get(Object.getPrototypeOf(CardTextField.prototype),"setText",this).call(this,text)}},{key:"textFieldDidEndEditing",value:function textFieldDidEndEditing(){this._editing=false;this._syncMask()}},{key:"textFieldDidBeginEditing",value:function textFieldDidBeginEditing(){this._editing=true;this._syncMask()}},{key:"_enableMasking",value:function _enableMasking(){if(!this._masked){this._unmaskedText=this.text();this._masked=true;this.setText(this._unmaskedText)}}},{key:"_disableMasking",value:function _disableMasking(){if(this._masked){this._masked=false;this.setText(this._unmaskedText);this._unmaskedText=null}}},{key:"_syncMask",value:function _syncMask(){if(this.cardMaskStrategy()===CardMaskStrategy.DoneEditing){if(this._editing){this._disableMasking()}else{this._enableMasking()}}}}],[{key:"CardMaskStrategy",get:function get(){return CardMaskStrategy}}]);return CardTextField}(_text_field2["default"]);exports["default"]=CardTextField;module.exports=exports["default"]},{"./adaptive_card_formatter":5,"./card_utils":8,"./text_field":21}],8:[function(_dereq_,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.determineCardType=determineCardType;exports.luhnCheck=luhnCheck;exports.validCardLength=validCardLength;var AMEX="amex";exports.AMEX=AMEX;var DISCOVER="discover";exports.DISCOVER=DISCOVER;var JCB="jcb";exports.JCB=JCB;var MASTERCARD="mastercard";exports.MASTERCARD=MASTERCARD;var VISA="visa";exports.VISA=VISA;function determineCardType(pan){if(pan===null||pan===undefined){return null}pan=pan.toString();var firsttwo=parseInt(pan.slice(0,2),10);var iin=parseInt(pan.slice(0,6),10);var halfiin=parseInt(pan.slice(0,3),10);if(pan[0]==="4"){return VISA}else if(pan.slice(0,4)==="6011"||firsttwo===65||halfiin>=664&&halfiin<=649||iin>=622126&&iin<=622925){return DISCOVER}else if(pan.slice(0,4)==="2131"||pan.slice(0,4)==="1800"||firsttwo===35){return JCB}else if(firsttwo>=51&&firsttwo<=55){return MASTERCARD}else if(firsttwo===34||firsttwo===37){return AMEX}}function luhnCheck(pan){var sum=0;var flip=true;for(var i=pan.length-1;i>=0;i--){var digit=parseInt(pan.charAt(i),10);sum+=(flip=!flip)?Math.floor(digit*2/10)+Math.floor(digit*2%10):digit}return sum%10===0}function validCardLength(pan){switch(determineCardType(pan)){case VISA:return pan.length===13||pan.length===16;case DISCOVER:case MASTERCARD:return pan.length===16;case JCB:return pan.length===15||pan.length===16;case AMEX:return pan.length===15;default:return false}}},{}],9:[function(_dereq_,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=installCaret;function installCaret(){var _document=arguments.length<=0||arguments[0]===undefined?document:arguments[0];var getCaret=undefined;var setCaret=undefined;if(!_document){throw new Error("Caret does not have access to document")}else if("selectionStart"in _document.createElement("input")){getCaret=function(element){return{start:element.selectionStart,end:element.selectionEnd}};setCaret=function(element,start,end){element.selectionStart=start;element.selectionEnd=end}}else if(_document.selection){getCaret=function(element){var selection=_document.selection;var value=element.value;var range=selection.createRange().duplicate();range.moveEnd("character",value.length);var start=range.text===""?value.length:value.lastIndexOf(range.text);range=selection.createRange().duplicate();range.moveStart("character",-value.length);var end=range.text.length;return{start:start,end:end}};setCaret=function(element,start,end){var range=element.createTextRange();range.collapse(true);range.moveStart("character",start);range.moveEnd("character",end-start);range.select()}}else{throw new Error("Caret unknown input selection capabilities")}return{getCaret:getCaret,setCaret:setCaret}}module.exports=exports["default"]},{}],10:[function(_dereq_,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;desc=parent=getter=undefined;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x=parent;_x2=property;_x3=receiver;_again=true;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _delimited_text_formatter=_dereq_("./delimited_text_formatter");var _delimited_text_formatter2=_interopRequireDefault(_delimited_text_formatter);var _card_utils=_dereq_("./card_utils");var DefaultCardFormatter=function(_DelimitedTextFormatter){_inherits(DefaultCardFormatter,_DelimitedTextFormatter);function DefaultCardFormatter(){_classCallCheck(this,DefaultCardFormatter);_get(Object.getPrototypeOf(DefaultCardFormatter.prototype),"constructor",this).call(this," ")}_createClass(DefaultCardFormatter,[{key:"hasDelimiterAtIndex",value:function hasDelimiterAtIndex(index){return index===4||index===9||index===14}},{key:"parse",value:function parse(text,error){var value=this._valueFromText(text);if(typeof error==="function"){if(!(0,_card_utils.validCardLength)(value)){error("card-formatter.number-too-short")}if(!(0,_card_utils.luhnCheck)(value)){error("card-formatter.invalid-number")}}return _get(Object.getPrototypeOf(DefaultCardFormatter.prototype),"parse",this).call(this,text,error)}},{key:"_valueFromText",value:function _valueFromText(text){return _get(Object.getPrototypeOf(DefaultCardFormatter.prototype),"_valueFromText",this).call(this,(text||"").replace(/[^\d]/g,""))}},{key:"maximumLength",get:function get(){return 16+3}}]);return DefaultCardFormatter}(_delimited_text_formatter2["default"]);exports["default"]=DefaultCardFormatter;module.exports=exports["default"]},{"./card_utils":8,"./delimited_text_formatter":11}],11:[function(_dereq_,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(_x2,_x3,_x4){var _again=true;_function:while(_again){var object=_x2,property=_x3,receiver=_x4;desc=parent=getter=undefined;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x2=parent;_x3=property;_x4=receiver;_again=true;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _formatter=_dereq_("./formatter");var _formatter2=_interopRequireDefault(_formatter);var DelimitedTextFormatter=function(_Formatter){_inherits(DelimitedTextFormatter,_Formatter);function DelimitedTextFormatter(delimiter){var isLazy=arguments.length<=1||arguments[1]===undefined?false:arguments[1];_classCallCheck(this,DelimitedTextFormatter);_get(Object.getPrototypeOf(DelimitedTextFormatter.prototype),"constructor",this).call(this);if(arguments.length===0){return}if(delimiter===null||delimiter===undefined||delimiter.length!==1){throw new Error("delimiter must have just one character")}this.delimiter=delimiter;this.isLazy=isLazy}_createClass(DelimitedTextFormatter,[{key:"delimiterAt",value:function delimiterAt(index){if(!this.hasDelimiterAtIndex(index)){return null}return this.delimiter}},{key:"isDelimiter",value:function isDelimiter(chr){return chr===this.delimiter}},{key:"format",value:function format(value){return this._textFromValue(value)}},{key:"_textFromValue",value:function _textFromValue(value){if(!value){return""}var result="";var delimiter=undefined;var maximumLength=this.maximumLength;for(var i=0,l=value.length;i<l;i++){while(delimiter=this.delimiterAt(result.length)){result+=delimiter}result+=value[i];if(!this.isLazy){while(delimiter=this.delimiterAt(result.length)){result+=delimiter}}}if(maximumLength!==undefined&&maximumLength!==null){return result.slice(0,maximumLength)}else{return result}}},{key:"parse",value:function parse(text){return this._valueFromText(text)}},{key:"_valueFromText",value:function _valueFromText(text){if(!text){return""}var result="";for(var i=0,l=text.length;i<l;i++){if(!this.isDelimiter(text[i])){result+=text[i]}}return result}},{key:"isChangeValid",value:function isChangeValid(change,error){if(!_get(Object.getPrototypeOf(DelimitedTextFormatter.prototype),"isChangeValid",this).call(this,change,error)){return false}var newText=change.proposed.text;var range=change.proposed.selectedRange;var hasSelection=range.length!==0;var startMovedLeft=range.start<change.current.selectedRange.start;var startMovedRight=range.start>change.current.selectedRange.start;var endMovedLeft=range.start+range.length<change.current.selectedRange.start+change.current.selectedRange.length;var endMovedRight=range.start+range.length>change.current.selectedRange.start+change.current.selectedRange.length;var startMovedOverADelimiter=startMovedLeft&&this.hasDelimiterAtIndex(range.start)||startMovedRight&&this.hasDelimiterAtIndex(range.start-1);var endMovedOverADelimiter=endMovedLeft&&this.hasDelimiterAtIndex(range.start+range.length)||endMovedRight&&this.hasDelimiterAtIndex(range.start+range.length-1);if(this.isDelimiter(change.deleted.text)){var newCursorPosition=change.deleted.start-1;while(this.isDelimiter(newText.charAt(newCursorPosition))){newText=newText.substring(0,newCursorPosition)+newText.substring(newCursorPosition+1);newCursorPosition--}newText=newText.substring(0,newCursorPosition)+newText.substring(newCursorPosition+1)}if(startMovedLeft&&startMovedOverADelimiter){while(this.delimiterAt(range.start-1)){range.start--;range.length++}range.start--;range.length++}if(startMovedRight){for(var i=change.current.selectedRange.start;i<range.start+range.length;i++){if(this.delimiterAt(i)){range.start++;if(range.length>0){range.length--}}}while(this.delimiterAt(range.start)){range.start++;range.length--}}if(hasSelection){if(endMovedOverADelimiter){if(endMovedLeft){while(this.delimiterAt(range.start+range.length-1)){range.length--}range.length--}if(endMovedRight){while(this.delimiterAt(range.start+range.length)){range.length++}range.length++}}while(this.hasDelimiterAtIndex(range.start+range.length-1)){if(startMovedLeft||endMovedLeft){range.length--}else{range.length++}}while(this.hasDelimiterAtIndex(range.start)){if(startMovedRight||endMovedRight){range.start++;range.length--}else{range.start--;range.length++}}}else{range.length=0}var result=true;var value=this._valueFromText(newText,function(){result=false;error.apply(undefined,arguments)});if(result){change.proposed.text=this._textFromValue(value)}return result}}]);return DelimitedTextFormatter}(_formatter2["default"]);exports["default"]=DelimitedTextFormatter;module.exports=exports["default"]},{"./formatter":15}],12:[function(_dereq_,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;desc=parent=getter=undefined;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x=parent;_x2=property;_x3=receiver;_again=true;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _delimited_text_formatter=_dereq_("./delimited_text_formatter");var _delimited_text_formatter2=_interopRequireDefault(_delimited_text_formatter);var DIGITS_PATTERN=/^\d*$/;var EmployerIdentificationNumberFormatter=function(_DelimitedTextFormatter){_inherits(EmployerIdentificationNumberFormatter,_DelimitedTextFormatter);function EmployerIdentificationNumberFormatter(){_classCallCheck(this,EmployerIdentificationNumberFormatter);_get(Object.getPrototypeOf(EmployerIdentificationNumberFormatter.prototype),"constructor",this).call(this,"-");this.maximumLength=9+1}_createClass(EmployerIdentificationNumberFormatter,[{key:"hasDelimiterAtIndex",value:function hasDelimiterAtIndex(index){return index===2}},{key:"isChangeValid",value:function isChangeValid(change,error){if(DIGITS_PATTERN.test(change.inserted.text)){return _get(Object.getPrototypeOf(EmployerIdentificationNumberFormatter.prototype),"isChangeValid",this).call(this,change,error)}else{return false}}}]);return EmployerIdentificationNumberFormatter}(_delimited_text_formatter2["default"]);exports["default"]=EmployerIdentificationNumberFormatter;module.exports=exports["default"]},{"./delimited_text_formatter":11}],13:[function(_dereq_,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;desc=parent=getter=undefined;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x=parent;_x2=property;_x3=receiver;_again=true;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _text_field=_dereq_("./text_field");var _text_field2=_interopRequireDefault(_text_field);var _expiry_date_formatter=_dereq_("./expiry_date_formatter");var _expiry_date_formatter2=_interopRequireDefault(_expiry_date_formatter);var ExpiryDateField=function(_TextField){_inherits(ExpiryDateField,_TextField);function ExpiryDateField(element){_classCallCheck(this,ExpiryDateField);_get(Object.getPrototypeOf(ExpiryDateField.prototype),"constructor",this).call(this,element,new _expiry_date_formatter2["default"])}_createClass(ExpiryDateField,[{key:"textFieldDidEndEditing",value:function textFieldDidEndEditing(){var value=this.value();if(value){this.setText(this.formatter().format(value))}}}]);return ExpiryDateField}(_text_field2["default"]);exports["default"]=ExpiryDateField;module.exports=exports["default"]},{"./expiry_date_formatter":14,"./text_field":21}],14:[function(_dereq_,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;desc=parent=getter=undefined;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x=parent;_x2=property;_x3=receiver;_again=true;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _delimited_text_formatter=_dereq_("./delimited_text_formatter");var _delimited_text_formatter2=_interopRequireDefault(_delimited_text_formatter);var _utils=_dereq_("./utils");function interpretTwoDigitYear(year){var thisYear=(new Date).getFullYear();var thisCentury=thisYear-thisYear%100;var centuries=[thisCentury,thisCentury-100,thisCentury+100].sort(function(a,b){return Math.abs(thisYear-(year+a))-Math.abs(thisYear-(year+b))});return year+centuries[0]}var ExpiryDateFormatter=function(_DelimitedTextFormatter){_inherits(ExpiryDateFormatter,_DelimitedTextFormatter);function ExpiryDateFormatter(){_classCallCheck(this,ExpiryDateFormatter);_get(Object.getPrototypeOf(ExpiryDateFormatter.prototype),"constructor",this).call(this,"/");this.maximumLength=5}_createClass(ExpiryDateFormatter,[{key:"hasDelimiterAtIndex",value:function hasDelimiterAtIndex(index){return index===2}},{key:"format",value:function format(value){if(!value){return""}var month=value.month;var year=value.year;year=year%100;return _get(Object.getPrototypeOf(ExpiryDateFormatter.prototype),"format",this).call(this,(0,_utils.zpad2)(month)+(0,_utils.zpad2)(year))}},{key:"parse",value:function parse(text,error){var monthAndYear=text.split(this.delimiter);var month=monthAndYear[0];var year=monthAndYear[1];if(month&&month.match(/^(0?[1-9]|1\d)$/)&&year&&year.match(/^\d\d?$/)){month=Number(month);year=interpretTwoDigitYear(Number(year));return{month:month,year:year}}else{if(typeof error==="function"){error("expiry-date-formatter.invalid-date")}return null}}},{key:"isChangeValid",value:function isChangeValid(change,error){if(!error){error=function(){}}var isBackspace=change.proposed.text.length<change.current.text.length;var newText=change.proposed.text;if(isBackspace){if(change.deleted.text===this.delimiter){newText=newText[0]}if(newText==="0"){newText=""}if(change.inserted.text.length>0&&!/^\d$/.test(change.inserted.text)){error("expiry-date-formatter.only-digits-allowed");return false}}else if(change.inserted.text===this.delimiter&&change.current.text==="1"){newText="01"+this.delimiter}else if(change.inserted.text.length>0&&!/^\d$/.test(change.inserted.text)){error("expiry-date-formatter.only-digits-allowed");return false}else{if(/^[2-9]$/.test(newText)){newText="0"+newText}if(/^1[3-9]$/.test(newText)){error("expiry-date-formatter.invalid-month");return false}if(newText==="00"){error("expiry-date-formatter.invalid-month");return false}if(/^(0[1-9]|1[0-2])$/.test(newText)){newText+=this.delimiter}var match=newText.match(/^(\d\d)(.)(\d\d?).*$/);if(match&&match[2]===this.delimiter){newText=match[1]+this.delimiter+match[3]}}change.proposed.text=newText;change.proposed.selectedRange={start:newText.length,length:0};return true}}]);return ExpiryDateFormatter}(_delimited_text_formatter2["default"]);exports["default"]=ExpiryDateFormatter;module.exports=exports["default"]},{"./delimited_text_formatter":11,"./utils":23}],15:[function(_dereq_,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Formatter=function(){function Formatter(){_classCallCheck(this,Formatter)}_createClass(Formatter,[{key:"format",value:function format(text){if(text===undefined||text===null){text=""}if(this.maximumLength!==undefined&&this.maximumLength!==null){text=text.substring(0,this.maximumLength)}return text}},{key:"parse",value:function parse(text){if(text===undefined||text===null){text=""}if(this.maximumLength!==undefined&&this.maximumLength!==null){text=text.substring(0,this.maximumLength)}return text}},{key:"isChangeValid",value:function isChangeValid(change){var selectedRange=change.proposed.selectedRange;var text=change.proposed.text;if(this.maximumLength!==undefined&&this.maximumLength!==null&&text.length>this.maximumLength){var available=this.maximumLength-(text.length-change.inserted.text.length);var newText=change.current.text.substring(0,change.current.selectedRange.start);if(available>0){newText+=change.inserted.text.substring(0,available)}newText+=change.current.text.substring(change.current.selectedRange.start+change.current.selectedRange.length);var truncatedLength=text.length-newText.length;change.proposed.text=newText;selectedRange.start-=truncatedLength}return true}}]);return Formatter}();exports["default"]=Formatter;module.exports=exports["default"]},{}],16:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _adaptive_card_formatter=_dereq_("./adaptive_card_formatter");var _adaptive_card_formatter2=_interopRequireDefault(_adaptive_card_formatter);var _amex_card_formatter=_dereq_("./amex_card_formatter");var _amex_card_formatter2=_interopRequireDefault(_amex_card_formatter);var _card_text_field=_dereq_("./card_text_field");var _card_text_field2=_interopRequireDefault(_card_text_field);var _card_utils=_dereq_("./card_utils");var _default_card_formatter=_dereq_("./default_card_formatter");var _default_card_formatter2=_interopRequireDefault(_default_card_formatter);var _delimited_text_formatter=_dereq_("./delimited_text_formatter");var _delimited_text_formatter2=_interopRequireDefault(_delimited_text_formatter);var _employer_identification_number_formatter=_dereq_("./employer_identification_number_formatter");var _employer_identification_number_formatter2=_interopRequireDefault(_employer_identification_number_formatter);var _expiry_date_field=_dereq_("./expiry_date_field");var _expiry_date_field2=_interopRequireDefault(_expiry_date_field);var _expiry_date_formatter=_dereq_("./expiry_date_formatter");var _expiry_date_formatter2=_interopRequireDefault(_expiry_date_formatter);var _formatter=_dereq_("./formatter");var _formatter2=_interopRequireDefault(_formatter);var _number_formatter=_dereq_("./number_formatter");var _number_formatter2=_interopRequireDefault(_number_formatter);var _number_formatter_settings_formatter=_dereq_("./number_formatter_settings_formatter");var _number_formatter_settings_formatter2=_interopRequireDefault(_number_formatter_settings_formatter);var _phone_formatter=_dereq_("./phone_formatter");var _phone_formatter2=_interopRequireDefault(_phone_formatter);var _social_security_number_formatter=_dereq_("./social_security_number_formatter");var _social_security_number_formatter2=_interopRequireDefault(_social_security_number_formatter);var _text_field=_dereq_("./text_field");var _text_field2=_interopRequireDefault(_text_field);var _undo_manager=_dereq_("./undo_manager");var _undo_manager2=_interopRequireDefault(_undo_manager);module.exports={AdaptiveCardFormatter:_adaptive_card_formatter2["default"],AmexCardFormatter:_amex_card_formatter2["default"],CardTextField:_card_text_field2["default"],CardUtils:{AMEX:_card_utils.AMEX,DISCOVER:_card_utils.DISCOVER,VISA:_card_utils.VISA,MASTERCARD:_card_utils.MASTERCARD,determineCardType:_card_utils.determineCardType,luhnCheck:_card_utils.luhnCheck,validCardLength:_card_utils.validCardLength},DefaultCardFormatter:_default_card_formatter2["default"],DelimitedTextFormatter:_delimited_text_formatter2["default"],EmployerIdentificationNumberFormatter:_employer_identification_number_formatter2["default"],ExpiryDateField:_expiry_date_field2["default"],ExpiryDateFormatter:_expiry_date_formatter2["default"],Formatter:_formatter2["default"],NumberFormatter:_number_formatter2["default"],NumberFormatterSettingsFormatter:_number_formatter_settings_formatter2["default"],PhoneFormatter:_phone_formatter2["default"],SocialSecurityNumberFormatter:_social_security_number_formatter2["default"],TextField:_text_field2["default"],UndoManager:_undo_manager2["default"]}},{"./adaptive_card_formatter":5,"./amex_card_formatter":6,"./card_text_field":7,"./card_utils":8,"./default_card_formatter":10,"./delimited_text_formatter":11,"./employer_identification_number_formatter":12,"./expiry_date_field":13,"./expiry_date_formatter":14,"./formatter":15,"./number_formatter":17,"./number_formatter_settings_formatter":18,"./phone_formatter":19,"./social_security_number_formatter":20,"./text_field":21,"./undo_manager":22}],17:[function(_dereq_,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);
if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;desc=parent=getter=undefined;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x=parent;_x2=property;_x3=receiver;_again=true;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _formatter=_dereq_("./formatter");var _formatter2=_interopRequireDefault(_formatter);var _number_formatter_settings_formatter=_dereq_("./number_formatter_settings_formatter");var _number_formatter_settings_formatter2=_interopRequireDefault(_number_formatter_settings_formatter);var _utils=_dereq_("./utils");var _stround=_dereq_("stround");var NONE=0;var CURRENCY=1;var PERCENT=2;var DEFAULT_LOCALE="en-US";var DEFAULT_COUNTRY="US";function splitLocaleComponents(locale){var match=locale.match(/^([a-z][a-z])(?:[-_]([a-z][a-z]))?$/i);if(match){var lang=match[1]&&match[1].toLowerCase();var country=match[2]&&match[2].toLowerCase();return{lang:lang,country:country}}}function get(object,key){if(object){var value=object[key];if(typeof value==="function"){for(var _len=arguments.length,args=Array(_len>2?_len-2:0),_key=2;_key<_len;_key++){args[_key-2]=arguments[_key]}return value.apply(undefined,args)}else{return value}}}function replaceCurrencySymbol(string,currencySymbol){return string.replace(/¤/g,currencySymbol)}function replacePlusSign(string,plusSign){return string.replace(/\+/g,plusSign)}function replaceMinusSign(string,minusSign){return string.replace(/-/g,minusSign)}var NumberFormatter=function(_Formatter){_inherits(NumberFormatter,_Formatter);function NumberFormatter(){_classCallCheck(this,NumberFormatter);_get(Object.getPrototypeOf(NumberFormatter.prototype),"constructor",this).call(this);this.setNumberStyle(NONE)}_createClass(NumberFormatter,[{key:"allowsFloats",value:function allowsFloats(){return this._get("allowsFloats")}},{key:"setAllowsFloats",value:function setAllowsFloats(allowsFloats){this._allowsFloats=allowsFloats;return this}},{key:"alwaysShowsDecimalSeparator",value:function alwaysShowsDecimalSeparator(){return this._get("alwaysShowsDecimalSeparator")}},{key:"setAlwaysShowsDecimalSeparator",value:function setAlwaysShowsDecimalSeparator(alwaysShowsDecimalSeparator){this._alwaysShowsDecimalSeparator=alwaysShowsDecimalSeparator;return this}},{key:"countryCode",value:function countryCode(){return this._countryCode||DEFAULT_COUNTRY}},{key:"setCountryCode",value:function setCountryCode(countryCode){this._countryCode=countryCode;return this}},{key:"currencyCode",value:function currencyCode(){return this._get("currencyCode")}},{key:"setCurrencyCode",value:function setCurrencyCode(currencyCode){this._currencyCode=currencyCode;return this}},{key:"currencySymbol",value:function currencySymbol(){if(this._shouldShowNativeCurrencySymbol()){return this._get("currencySymbol")}else{return this._get("internationalCurrencySymbol")}}},{key:"setCurrencySymbol",value:function setCurrencySymbol(currencySymbol){this._currencySymbol=currencySymbol;return this}},{key:"_shouldShowNativeCurrencySymbol",value:function _shouldShowNativeCurrencySymbol(){var regionDefaultCurrencyCode=this._regionDefaults().currencyCode;if(typeof regionDefaultCurrencyCode==="function"){regionDefaultCurrencyCode=regionDefaultCurrencyCode()}return this.currencyCode()===regionDefaultCurrencyCode}},{key:"decimalSeparator",value:function decimalSeparator(){return this._get("decimalSeparator")}},{key:"setDecimalSeparator",value:function setDecimalSeparator(decimalSeparator){this._decimalSeparator=decimalSeparator;return this}},{key:"exponent",value:function exponent(){return this._get("exponent")}},{key:"setExponent",value:function setExponent(exponent){this._exponent=exponent;return this}},{key:"groupingSeparator",value:function groupingSeparator(){return this._get("groupingSeparator")}},{key:"setGroupingSeparator",value:function setGroupingSeparator(groupingSeparator){this._groupingSeparator=groupingSeparator;return this}},{key:"groupingSize",value:function groupingSize(){return this._get("groupingSize")}},{key:"setGroupingSize",value:function setGroupingSize(groupingSize){this._groupingSize=groupingSize;return this}},{key:"internationalCurrencySymbol",value:function internationalCurrencySymbol(){return this._get("internationalCurrencySymbol")}},{key:"setInternationalCurrencySymbol",value:function setInternationalCurrencySymbol(internationalCurrencySymbol){this._internationalCurrencySymbol=internationalCurrencySymbol;return this}},{key:"isLenient",value:function isLenient(){return this._lenient}},{key:"setLenient",value:function setLenient(lenient){this._lenient=lenient;return this}},{key:"locale",value:function locale(){return this._locale||DEFAULT_LOCALE}},{key:"setLocale",value:function setLocale(locale){this._locale=locale;return this}},{key:"maximum",value:function maximum(){return this._maximum}},{key:"setMaximum",value:function setMaximum(max){this._maximum=max;return this}},{key:"minimum",value:function minimum(){return this._minimum}},{key:"setMinimum",value:function setMinimum(min){this._minimum=min;return this}},{key:"maximumFractionDigits",value:function maximumFractionDigits(){var result=this._get("maximumFractionDigits");var minimumFractionDigits=this._minimumFractionDigits;if(result!==null&&result!==undefined&&minimumFractionDigits!==null&&minimumFractionDigits!==undefined&&minimumFractionDigits>result){result=minimumFractionDigits}return result}},{key:"setMaximumFractionDigits",value:function setMaximumFractionDigits(maximumFractionDigits){this._maximumFractionDigits=maximumFractionDigits;return this}},{key:"minimumFractionDigits",value:function minimumFractionDigits(){var result=this._get("minimumFractionDigits");var maximumFractionDigits=this._maximumFractionDigits;if(result!==null&&result!==undefined&&maximumFractionDigits!==null&&maximumFractionDigits!==undefined&&maximumFractionDigits<result){result=maximumFractionDigits}return result}},{key:"setMinimumFractionDigits",value:function setMinimumFractionDigits(minimumFractionDigits){this._minimumFractionDigits=minimumFractionDigits;return this}},{key:"maximumIntegerDigits",value:function maximumIntegerDigits(){var result=this._get("maximumIntegerDigits");var minimumIntegerDigits=this._minimumIntegerDigits;if(result!==null&&result!==undefined&&minimumIntegerDigits!==null&&minimumIntegerDigits!==undefined&&minimumIntegerDigits>result){result=minimumIntegerDigits}return result}},{key:"setMaximumIntegerDigits",value:function setMaximumIntegerDigits(maximumIntegerDigits){this._maximumIntegerDigits=maximumIntegerDigits;return this}},{key:"minimumIntegerDigits",value:function minimumIntegerDigits(){var result=this._get("minimumIntegerDigits");var maximumIntegerDigits=this._maximumIntegerDigits;if(result!==null&&result!==undefined&&maximumIntegerDigits!==null&&maximumIntegerDigits!==undefined&&maximumIntegerDigits<result){result=maximumIntegerDigits}return result}},{key:"setMinimumIntegerDigits",value:function setMinimumIntegerDigits(minimumIntegerDigits){this._minimumIntegerDigits=minimumIntegerDigits;return this}},{key:"minusSign",value:function minusSign(){return this._get("minusSign")}},{key:"setMinusSign",value:function setMinusSign(minusSign){this._minusSign=minusSign;return this}},{key:"negativeFormat",value:function negativeFormat(){return this.numberFormatFormatter().format({alwaysShowsDecimalSeparator:this.alwaysShowsDecimalSeparator(),groupingSize:this.groupingSize(),maximumFractionDigits:this.maximumFractionDigits(),minimumFractionDigits:this.minimumFractionDigits(),minimumIntegerDigits:this.minimumIntegerDigits(),prefix:this._get("negativePrefix"),suffix:this._get("negativeSuffix"),usesGroupingSeparator:this.usesGroupingSeparator()})}},{key:"setNegativeFormat",value:function setNegativeFormat(negativeFormat){var settings=this.numberFormatFormatter().parse(negativeFormat);this.setNegativePrefix(settings.prefix);this.setNegativeSuffix(settings.suffix);this.setGroupingSize(settings.groupingSize);this.setMaximumFractionDigits(settings.maximumFractionDigits);this.setMinimumFractionDigits(settings.minimumFractionDigits);this.setMinimumIntegerDigits(settings.minimumIntegerDigits);this.setUsesGroupingSeparator(settings.usesGroupingSeparator)}},{key:"negativeInfinitySymbol",value:function negativeInfinitySymbol(){return this._get("negativeInfinitySymbol")}},{key:"setNegativeInfinitySymbol",value:function setNegativeInfinitySymbol(negativeInfinitySymbol){this._negativeInfinitySymbol=negativeInfinitySymbol;return this}},{key:"negativePrefix",value:function negativePrefix(){return replaceCurrencySymbol(replaceMinusSign(this._get("negativePrefix"),this._get("minusSign")),this.currencySymbol())}},{key:"setNegativePrefix",value:function setNegativePrefix(prefix){this._negativePrefix=prefix;return this}},{key:"negativeSuffix",value:function negativeSuffix(){return replaceCurrencySymbol(replaceMinusSign(this._get("negativeSuffix"),this._get("minusSign")),this.currencySymbol())}},{key:"setNegativeSuffix",value:function setNegativeSuffix(prefix){this._negativeSuffix=prefix;return this}},{key:"notANumberSymbol",value:function notANumberSymbol(){return this._get("notANumberSymbol")}},{key:"setNotANumberSymbol",value:function setNotANumberSymbol(notANumberSymbol){this._notANumberSymbol=notANumberSymbol;return this}},{key:"nullSymbol",value:function nullSymbol(){return this._get("nullSymbol")}},{key:"setNullSymbol",value:function setNullSymbol(nullSymbol){this._nullSymbol=nullSymbol;return this}},{key:"numberFormatFormatter",value:function numberFormatFormatter(){if(!this._numberFormatFormatter){this._numberFormatFormatter=new _number_formatter_settings_formatter2["default"]}return this._numberFormatFormatter}},{key:"numberStyle",value:function numberStyle(){return this._numberStyle}},{key:"setNumberStyle",value:function setNumberStyle(numberStyle){this._numberStyle=numberStyle;switch(this._numberStyle){case NONE:this._styleDefaults=StyleDefaults.NONE;break;case PERCENT:this._styleDefaults=StyleDefaults.PERCENT;break;case CURRENCY:this._styleDefaults=StyleDefaults.CURRENCY;break;default:this._styleDefaults=null}return this}},{key:"percentSymbol",value:function percentSymbol(){return this._get("percentSymbol")}},{key:"setPercentSymbol",value:function setPercentSymbol(percentSymbol){this._percentSymbol=percentSymbol;return this}},{key:"plusSign",value:function plusSign(){return this._get("plusSign")}},{key:"setPlusSign",value:function setPlusSign(plusSign){this._plusSign=plusSign;return this}},{key:"positiveFormat",value:function positiveFormat(){return this.numberFormatFormatter().format({alwaysShowsDecimalSeparator:this.alwaysShowsDecimalSeparator(),groupingSize:this.groupingSize(),maximumFractionDigits:this.maximumFractionDigits(),minimumFractionDigits:this.minimumFractionDigits(),minimumIntegerDigits:this.minimumIntegerDigits(),prefix:this._get("positivePrefix"),suffix:this._get("positiveSuffix"),usesGroupingSeparator:this.usesGroupingSeparator()})}},{key:"setPositiveFormat",value:function setPositiveFormat(positiveFormat){var settings=this.numberFormatFormatter().parse(positiveFormat);this.setPositivePrefix(settings.prefix);this.setPositiveSuffix(settings.suffix);this.setGroupingSize(settings.groupingSize);this.setMaximumFractionDigits(settings.maximumFractionDigits);this.setMinimumFractionDigits(settings.minimumFractionDigits);this.setMinimumIntegerDigits(settings.minimumIntegerDigits);this.setUsesGroupingSeparator(settings.usesGroupingSeparator)}},{key:"positiveInfinitySymbol",value:function positiveInfinitySymbol(){return this._get("positiveInfinitySymbol")}},{key:"setPositiveInfinitySymbol",value:function setPositiveInfinitySymbol(positiveInfinitySymbol){this._positiveInfinitySymbol=positiveInfinitySymbol;return this}},{key:"positivePrefix",value:function positivePrefix(){return replaceCurrencySymbol(replacePlusSign(this._get("positivePrefix"),this._get("plusSign")),this.currencySymbol())}},{key:"setPositivePrefix",value:function setPositivePrefix(prefix){this._positivePrefix=prefix;return this}},{key:"positiveSuffix",value:function positiveSuffix(){return replaceCurrencySymbol(replacePlusSign(this._get("positiveSuffix"),this._get("plusSign")),this.currencySymbol())}},{key:"setPositiveSuffix",value:function setPositiveSuffix(prefix){this._positiveSuffix=prefix;return this}},{key:"roundingMode",value:function roundingMode(){return this._get("roundingMode")}},{key:"setRoundingMode",value:function setRoundingMode(roundingMode){this._roundingMode=roundingMode;return this}},{key:"usesGroupingSeparator",value:function usesGroupingSeparator(){return this._get("usesGroupingSeparator")}},{key:"setUsesGroupingSeparator",value:function setUsesGroupingSeparator(usesGroupingSeparator){this._usesGroupingSeparator=usesGroupingSeparator;return this}},{key:"zeroSymbol",value:function zeroSymbol(){return this._get("zeroSymbol")}},{key:"setZeroSymbol",value:function setZeroSymbol(zeroSymbol){this._zeroSymbol=zeroSymbol;return this}},{key:"_get",value:function _get(attr){var value=this["_"+attr];if(value!==null&&value!==undefined){return value}var styleDefaults=this._styleDefaults;var localeDefaults=this._localeDefaults();var regionDefaults=this._regionDefaults();value=get(styleDefaults,attr,this,localeDefaults);if(value!==null&&value!==undefined){return value}value=get(localeDefaults,attr,this,styleDefaults);if(value!==null&&value!==undefined){return value}value=get(regionDefaults,attr,this,styleDefaults);if(value!==null&&value!==undefined){return value}value=get(this._currencyDefaults(),attr,this,localeDefaults);if(value!==null&&value!==undefined){return value}return null}},{key:"format",value:function format(number){if(number===""){return""}var zeroSymbol=this.zeroSymbol();if(zeroSymbol!==undefined&&zeroSymbol!==null&&number===0){return zeroSymbol}var nullSymbol=this.nullSymbol();if(nullSymbol!==undefined&&nullSymbol!==null&&number===null){return nullSymbol}var notANumberSymbol=this.notANumberSymbol();if(notANumberSymbol!==undefined&&notANumberSymbol!==null&&isNaN(number)){return notANumberSymbol}var positiveInfinitySymbol=this.positiveInfinitySymbol();if(positiveInfinitySymbol!==undefined&&positiveInfinitySymbol!==null&&number===Infinity){return positiveInfinitySymbol}var negativeInfinitySymbol=this.negativeInfinitySymbol();if(negativeInfinitySymbol!==undefined&&negativeInfinitySymbol!==null&&number===-Infinity){return negativeInfinitySymbol}var negative=number<0;var parts=(""+Math.abs(number)).split(".");var integerPart=parts[0];var fractionPart=parts[1]||"";var exponent=this.exponent();if(exponent!==undefined&&exponent!==null){var shifted=(0,_stround.shiftParts)([negative,integerPart,fractionPart],exponent);negative=shifted[0];integerPart=shifted[1];fractionPart=shifted[2];while(integerPart[0]==="0"){integerPart=integerPart.slice(1)}}var maximumFractionDigits=this.maximumFractionDigits();if(fractionPart.length>maximumFractionDigits){var unrounded=integerPart+"."+fractionPart;var rounded=this._round(negative?"-"+unrounded:unrounded);if(rounded[0]==="-"){rounded=rounded.slice(1)}parts=rounded.split(".");integerPart=parts[0];fractionPart=parts[1]||""}var minimumFractionDigits=this.minimumFractionDigits();while(fractionPart.length<minimumFractionDigits){fractionPart+="0"}var minimumIntegerDigits=this.minimumIntegerDigits();while(integerPart.length<minimumIntegerDigits){integerPart="0"+integerPart}while(fractionPart.length>minimumFractionDigits&&fractionPart.slice(-1)==="0"){fractionPart=fractionPart.slice(0,-1)}var maximumIntegerDigits=this.maximumIntegerDigits();if(maximumIntegerDigits!==undefined&&maximumIntegerDigits!==null&&integerPart.length>maximumIntegerDigits){integerPart=integerPart.slice(-maximumIntegerDigits)}if(fractionPart.length>0||this.alwaysShowsDecimalSeparator()){fractionPart=this.decimalSeparator()+fractionPart}if(this.usesGroupingSeparator()){var integerPartWithGroupingSeparators="";var copiedCharacterCount=0;for(var i=integerPart.length-1;i>=0;i--){if(copiedCharacterCount>0&&copiedCharacterCount%this.groupingSize()===0){integerPartWithGroupingSeparators=this.groupingSeparator()+integerPartWithGroupingSeparators}integerPartWithGroupingSeparators=integerPart[i]+integerPartWithGroupingSeparators;copiedCharacterCount++}integerPart=integerPartWithGroupingSeparators}var result=integerPart+fractionPart;if(negative){result=this.negativePrefix()+result+this.negativeSuffix()}else{result=this.positivePrefix()+result+this.positiveSuffix()}return result}},{key:"_round",value:function _round(number){return(0,_stround.round)(number,this.maximumFractionDigits(),this.roundingMode())}},{key:"parse",value:function parse(string,error){var result=undefined;var positivePrefix=this.positivePrefix();var negativePrefix=this.negativePrefix();var positiveSuffix=this.positiveSuffix();var negativeSuffix=this.negativeSuffix();if(this.isLenient()){string=string.replace(/\s/g,"");positivePrefix=(0,_utils.trim)(positivePrefix);negativePrefix=(0,_utils.trim)(negativePrefix);positiveSuffix=(0,_utils.trim)(positiveSuffix);negativeSuffix=(0,_utils.trim)(negativeSuffix)}var zeroSymbol=undefined;var nullSymbol=undefined;var notANumberSymbol=undefined;var positiveInfinitySymbol=undefined;var negativeInfinitySymbol=undefined;var innerString=undefined;if((zeroSymbol=this.zeroSymbol())!==undefined&&zeroSymbol!==null&&string===zeroSymbol){result=0}else if((nullSymbol=this.nullSymbol())!==undefined&&nullSymbol!==null&&string===nullSymbol){result=null}else if((notANumberSymbol=this.notANumberSymbol())!==undefined&&notANumberSymbol!==null&&string===notANumberSymbol){result=NaN}else if((positiveInfinitySymbol=this.positiveInfinitySymbol())!==undefined&&positiveInfinitySymbol!==null&&string===positiveInfinitySymbol){result=Infinity}else if((negativeInfinitySymbol=this.negativeInfinitySymbol())!==undefined&&negativeInfinitySymbol!==null&&string===negativeInfinitySymbol){result=-Infinity}else{var hasNegativePrefix=(0,_utils.startsWith)(negativePrefix,string);var hasNegativeSuffix=(0,_utils.endsWith)(negativeSuffix,string);if(hasNegativePrefix&&(this.isLenient()||hasNegativeSuffix)){innerString=string.slice(negativePrefix.length);if(hasNegativeSuffix){innerString=innerString.slice(0,innerString.length-negativeSuffix.length)}result=this._parseAbsoluteValue(innerString,error);if(result!==undefined&&result!==null){result*=-1}}else{var hasPositivePrefix=(0,_utils.startsWith)(positivePrefix,string);var hasPositiveSuffix=(0,_utils.endsWith)(positiveSuffix,string);if(this.isLenient()||hasPositivePrefix&&hasPositiveSuffix){innerString=string;if(hasPositivePrefix){innerString=innerString.slice(positivePrefix.length)}if(hasPositiveSuffix){innerString=innerString.slice(0,innerString.length-positiveSuffix.length)}result=this._parseAbsoluteValue(innerString,error)}else{if(typeof error==="function"){error("number-formatter.invalid-format")}return null}}}if(result!==undefined&&result!==null){var minimum=this.minimum();if(minimum!==undefined&&minimum!==null&&result<minimum){if(typeof error==="function"){error("number-formatter.out-of-bounds.below-minimum")}return null}var maximum=this.maximum();if(maximum!==undefined&&maximum!==null&&result>maximum){if(typeof error==="function"){error("number-formatter.out-of-bounds.above-maximum")}return null}}return result}},{key:"_parseAbsoluteValue",value:function _parseAbsoluteValue(string,error){var number=undefined;if(string.length===0){if(typeof error==="function"){error("number-formatter.invalid-format")}return null}var parts=string.split(this.decimalSeparator());if(parts.length>2){if(typeof error==="function"){error("number-formatter.invalid-format")}return null}var integerPart=parts[0];var fractionPart=parts[1]||"";if(this.usesGroupingSeparator()){var groupingSize=this.groupingSize();var groupParts=integerPart.split(this.groupingSeparator());if(!this.isLenient()){if(groupParts.length>1){if(groupParts[0].length>groupingSize){if(typeof error==="function"){error("number-formatter.invalid-format.grouping-size")}return null}var groupPartsTail=groupParts.slice(1);for(var i=0,l=groupPartsTail.length;i<l;i++){if(groupPartsTail[i].length!==groupingSize){if(typeof error==="function"){error("number-formatter.invalid-format.grouping-size")}return null}}}}integerPart=groupParts.join("")}if(!(0,_utils.isDigits)(integerPart)||!(0,_utils.isDigits)(fractionPart)){if(typeof error==="function"){error("number-formatter.invalid-format")}return null}var exponent=this.exponent();if(exponent!==undefined&&exponent!==null){var shifted=(0,_stround.shiftParts)([false,integerPart,fractionPart],-exponent);integerPart=shifted[1];fractionPart=shifted[2]}number=Number(integerPart)+Number("."+(fractionPart||"0"));if(!this.allowsFloats()&&number!==~~number){if(typeof error==="function"){error("number-formatter.floats-not-allowed")}return null}return number}},{key:"_currencyDefaults",value:function _currencyDefaults(){var result={};(0,_utils.forEach)(CurrencyDefaults["default"],function(value,key){result[key]=value});(0,_utils.forEach)(CurrencyDefaults[this.currencyCode()],function(value,key){result[key]=value});return result}},{key:"_regionDefaults",value:function _regionDefaults(){var result={};(0,_utils.forEach)(RegionDefaults["default"],function(value,key){result[key]=value});(0,_utils.forEach)(RegionDefaults[this.countryCode()],function(value,key){result[key]=value});return result}},{key:"_localeDefaults",value:function _localeDefaults(){var locale=this.locale();var countryCode=this.countryCode();var lang=splitLocaleComponents(locale).lang;var result={};var defaultFallbacks=[RegionDefaults["default"],LocaleDefaults["default"],RegionDefaults[countryCode],LocaleDefaults[lang],LocaleDefaults[locale]];(0,_utils.forEach)(defaultFallbacks,function(defaults){(0,_utils.forEach)(defaults,function(value,key){result[key]=value})});return result}}]);return NumberFormatter}(_formatter2["default"]);NumberFormatter.prototype._allowsFloats=null;NumberFormatter.prototype._alwaysShowsDecimalSeparator=null;NumberFormatter.prototype._countryCode=null;NumberFormatter.prototype._currencyCode=null;NumberFormatter.prototype._exponent=null;NumberFormatter.prototype._groupingSeparator=null;NumberFormatter.prototype._groupingSize=null;NumberFormatter.prototype._lenient=false;NumberFormatter.prototype._locale=null;NumberFormatter.prototype._internationalCurrencySymbol=null;NumberFormatter.prototype._maximumFractionDigits=null;NumberFormatter.prototype._minimumFractionDigits=null;NumberFormatter.prototype._maximumIntegerDigits=null;NumberFormatter.prototype._minimumIntegerDigits=null;NumberFormatter.prototype._maximum=null;NumberFormatter.prototype._minimum=null;NumberFormatter.prototype._notANumberSymbol=null;NumberFormatter.prototype._nullSymbol=null;NumberFormatter.prototype._numberStyle=null;NumberFormatter.prototype._roundingMode=null;NumberFormatter.prototype._usesGroupingSeparator=null;NumberFormatter.prototype._zeroSymbol=null;NumberFormatter.prototype.stringFromNumber=NumberFormatter.prototype.format;NumberFormatter.prototype.numberFromString=NumberFormatter.prototype.parse;NumberFormatter.Rounding=_stround.modes;NumberFormatter.Style={NONE:NONE,CURRENCY:CURRENCY,PERCENT:PERCENT};var StyleDefaults={NONE:{usesGroupingSeparator:false,minimumFractionDigits:0,maximumFractionDigits:0,minimumIntegerDigits:0},PERCENT:{usesGroupingSeparator:false,exponent:2,minimumFractionDigits:0,maximumFractionDigits:0,minimumIntegerDigits:1,positiveSuffix:function positiveSuffix(formatter){return formatter.percentSymbol()},negativeSuffix:function negativeSuffix(formatter){return formatter.percentSymbol()}},CURRENCY:{positivePrefix:function positivePrefix(formatter,locale){return get(locale,"positiveCurrencyPrefix",formatter,this)},positiveSuffix:function positiveSuffix(formatter,locale){return get(locale,"positiveCurrencySuffix",formatter,this)},negativePrefix:function negativePrefix(formatter,locale){return get(locale,"negativeCurrencyPrefix",formatter,this)},negativeSuffix:function negativeSuffix(formatter,locale){return get(locale,"negativeCurrencySuffix",formatter,this)}}};var LocaleDefaults={"default":{allowsFloats:true,alwaysShowsDecimalSeparator:false,decimalSeparator:".",groupingSeparator:",",groupingSize:3,minusSign:"-",negativeInfinitySymbol:"-∞",negativePrefix:"-",negativeSuffix:"",notANumberSymbol:"NaN",nullSymbol:"",percentSymbol:"%",positiveInfinitySymbol:"+∞",positivePrefix:"",positiveSuffix:"",plusSign:"+",roundingMode:NumberFormatter.Rounding.HALF_EVEN,positiveCurrencyPrefix:"¤",positiveCurrencySuffix:"",negativeCurrencyPrefix:"(¤",negativeCurrencySuffix:")"},fr:{decimalSeparator:",",groupingSeparator:" ",percentSymbol:" %",positiveCurrencyPrefix:"",positiveCurrencySuffix:" ¤",negativeCurrencyPrefix:"(",negativeCurrencySuffix:" ¤)"},ja:{negativeCurrencyPrefix:"-¤",negativeCurrencySuffix:""},"en-GB":{negativeCurrencyPrefix:"-¤",negativeCurrencySuffix:""}};var RegionDefaults={AE:{currencyCode:"AED"},AG:{currencyCode:"XCD"},AI:{currencyCode:"XCD"},AL:{currencyCode:"ALL"},AM:{currencyCode:"AMD"},AO:{currencyCode:"AOA"},AR:{currencyCode:"ARS"},AT:{currencyCode:"EUR"},AU:{currencyCode:"AUD"},AW:{currencyCode:"AWG"},AZ:{currencyCode:"AZN"},BA:{currencyCode:"BAM"},BB:{currencyCode:"BBD"},BD:{currencyCode:"BDT"},BE:{currencyCode:"EUR"},BF:{currencyCode:"XOF"},BG:{currencyCode:"BGN"},BH:{currencyCode:"BHD"},BJ:{currencyCode:"XOF"},BM:{currencyCode:"BMD"},BN:{currencyCode:"BND"},BO:{currencyCode:"BOB"},BR:{currencyCode:"BRL"},BS:{currencyCode:"BSD"},BT:{currencyCode:"BTN"},BW:{currencyCode:"BWP"},BY:{currencyCode:"BYR"},BZ:{currencyCode:"BZD"},CA:{currencyCode:"CAD"},CG:{currencyCode:"CDF"},CH:{currencyCode:"CHF"},CI:{currencyCode:"XOF"},CL:{currencyCode:"CLP"},CM:{currencyCode:"XAF"},CN:{currencyCode:"CNY"},CO:{currencyCode:"COP"},CR:{currencyCode:"CRC"},CV:{currencyCode:"CVE"},CY:{currencyCode:"EUR"},CZ:{currencyCode:"CZK"},DE:{currencyCode:"EUR"},DK:{currencyCode:"DKK"},DM:{currencyCode:"XCD"},DO:{currencyCode:"DOP"},DZ:{currencyCode:"DZD"},EC:{currencyCode:"USD"},EE:{currencyCode:"EUR"},EG:{currencyCode:"EGP"},ES:{currencyCode:"EUR"},ET:{currencyCode:"ETB"},FI:{currencyCode:"EUR"},FJ:{currencyCode:"FJD"},FM:{currencyCode:"USD"},FR:{currencyCode:"EUR"},GA:{currencyCode:"XAF"},GB:{currencyCode:"GBP"},GD:{currencyCode:"XCD"},GE:{currencyCode:"GEL"},GH:{currencyCode:"GHS"},GI:{currencyCode:"GIP"},GM:{currencyCode:"GMD"},GR:{currencyCode:"EUR"},GT:{currencyCode:"GTQ"},GU:{currencyCode:"USD"},GW:{currencyCode:"XOF"},GY:{currencyCode:"GYD"},HK:{currencyCode:"HKD"},HN:{currencyCode:"HNL"},HR:{currencyCode:"HRK"},HT:{currencyCode:"HTG"},HU:{currencyCode:"HUF"},ID:{currencyCode:"IDR"},IE:{currencyCode:"EUR"},IL:{currencyCode:"ILS"},IN:{currencyCode:"INR"},IS:{currencyCode:"ISK"},IT:{currencyCode:"EUR"},JM:{currencyCode:"JMD"},JO:{currencyCode:"JOD"},JP:{currencyCode:"JPY"},KE:{currencyCode:"KES"},KG:{currencyCode:"KGS"},KH:{currencyCode:"KHR"},KN:{currencyCode:"XCD"},KR:{currencyCode:"KRW"},KW:{currencyCode:"KWD"},KY:{currencyCode:"KYD"},KZ:{currencyCode:"KZT"},LA:{currencyCode:"LAK"},LB:{currencyCode:"LBP"},LC:{currencyCode:"XCD"},LI:{currencyCode:"CHF"},LK:{currencyCode:"LKR"},LR:{currencyCode:"LRD"},LT:{currencyCode:"LTL"},LU:{currencyCode:"EUR"},LV:{currencyCode:"EUR"},MA:{currencyCode:"MAD"},MD:{currencyCode:"MDL"},MG:{currencyCode:"MGA"},MK:{currencyCode:"MKD"},ML:{currencyCode:"XOF"},MM:{currencyCode:"MMK"},MN:{currencyCode:"MNT"},MO:{currencyCode:"MOP"},MP:{currencyCode:"USD"},MR:{currencyCode:"MRO"},MS:{currencyCode:"XCD"},MT:{currencyCode:"EUR"},MU:{currencyCode:"MUR"},MW:{currencyCode:"MWK"},MX:{currencyCode:"MXN"},MY:{currencyCode:"MYR"},MZ:{currencyCode:"MZN"},NA:{currencyCode:"NAD"},NE:{currencyCode:"XOF"},NG:{currencyCode:"NGN"},NI:{currencyCode:"NIO"},NL:{currencyCode:"EUR"},NO:{currencyCode:"NOK"},NP:{currencyCode:"NPR"},NZ:{currencyCode:"NZD"},OM:{currencyCode:"OMR"},PA:{currencyCode:"PAB"},PE:{currencyCode:"PEN"},PG:{currencyCode:"PGK"},PH:{currencyCode:"PHP"},PK:{currencyCode:"PKR"},PL:{currencyCode:"PLN"},PR:{currencyCode:"USD"},PT:{currencyCode:"EUR"},PW:{currencyCode:"USD"},PY:{currencyCode:"PYG"},QA:{currencyCode:"QAR"},RO:{currencyCode:"RON"},RS:{currencyCode:"RSD"},RU:{currencyCode:"RUB"},RW:{currencyCode:"RWF"},SA:{currencyCode:"SAR"},SB:{currencyCode:"SBD"},SC:{currencyCode:"SCR"},SE:{currencyCode:"SEK"},SG:{currencyCode:"SGD"},SI:{currencyCode:"EUR"},SK:{currencyCode:"EUR"},SL:{currencyCode:"SLL"},SN:{currencyCode:"XOF"},SR:{currencyCode:"SRD"},ST:{currencyCode:"STD"},SV:{currencyCode:"SVC"},SZ:{currencyCode:"SZL"},TC:{currencyCode:"USD"},TD:{currencyCode:"XAF"},TG:{currencyCode:"XOF"},TH:{currencyCode:"THB"},TJ:{currencyCode:"TJS"},TM:{currencyCode:"TMT"},TN:{currencyCode:"TND"},TR:{currencyCode:"TRY"},TT:{currencyCode:"TTD"},TW:{currencyCode:"TWD"},TZ:{currencyCode:"TZS"},UA:{currencyCode:"UAH"},UG:{currencyCode:"UGX"},US:{currencyCode:"USD"},UY:{currencyCode:"UYU"},UZ:{currencyCode:"UZS"},VC:{currencyCode:"XCD"},VE:{currencyCode:"VEF"},VG:{currencyCode:"USD"},VI:{currencyCode:"USD"},VN:{currencyCode:"VND"},YE:{currencyCode:"YER"},ZA:{currencyCode:"ZAR"},ZM:{currencyCode:"ZMW"},ZW:{currencyCode:"USD"}};var CurrencyDefaults={"default":{currencySymbol:function currencySymbol(formatter){return formatter.currencyCode()},internationalCurrencySymbol:function internationalCurrencySymbol(formatter){return formatter.currencyCode()},minimumFractionDigits:2,maximumFractionDigits:2,minimumIntegerDigits:1,usesGroupingSeparator:true},AED:{currencySymbol:"د.إ",internationalCurrencySymbol:"د.إ"},ALL:{currencySymbol:"L",internationalCurrencySymbol:"L"},AMD:{currencySymbol:"դր.",internationalCurrencySymbol:"դր."},AOA:{currencySymbol:"Kz",internationalCurrencySymbol:"Kz"},ARS:{currencySymbol:"$",internationalCurrencySymbol:"$"},AUD:{currencySymbol:"$",internationalCurrencySymbol:"$"},AWG:{currencySymbol:"ƒ",internationalCurrencySymbol:"ƒ"},AZN:{currencySymbol:"₼",internationalCurrencySymbol:"₼"},BAM:{currencySymbol:"КМ",internationalCurrencySymbol:"КМ"},BBD:{currencySymbol:"$",internationalCurrencySymbol:"$"},BDT:{currencySymbol:"৳",internationalCurrencySymbol:"৳"},BGN:{currencySymbol:"лв",internationalCurrencySymbol:"лв"},BHD:{currencySymbol:"ب.د",internationalCurrencySymbol:"ب.د",minimumFractionDigits:3,maximumFractionDigits:3},BMD:{currencySymbol:"$",internationalCurrencySymbol:"$"},BND:{currencySymbol:"$",internationalCurrencySymbol:"$"},BOB:{currencySymbol:"Bs.",internationalCurrencySymbol:"Bs."},BRL:{currencySymbol:"R$",internationalCurrencySymbol:"R$"},BSD:{currencySymbol:"$",internationalCurrencySymbol:"$"},BTN:{currencySymbol:"Nu.",internationalCurrencySymbol:"Nu."},BWP:{currencySymbol:"P",internationalCurrencySymbol:"P"},BYR:{currencySymbol:"Br",internationalCurrencySymbol:"Br"},BZD:{currencySymbol:"$",internationalCurrencySymbol:"$"},CAD:{currencySymbol:"$",internationalCurrencySymbol:"$"},CDF:{currencySymbol:"Fr",internationalCurrencySymbol:"Fr"},CHF:{currencySymbol:"Fr",internationalCurrencySymbol:"Fr"},CLP:{currencySymbol:"$",internationalCurrencySymbol:"$",
minimumFractionDigits:0,maximumFractionDigits:0},CNY:{currencySymbol:"¥",internationalCurrencySymbol:"¥"},COP:{currencySymbol:"$",internationalCurrencySymbol:"$"},CRC:{currencySymbol:"₡",internationalCurrencySymbol:"₡"},CVE:{currencySymbol:"$",internationalCurrencySymbol:"$"},CZK:{currencySymbol:"Kč",internationalCurrencySymbol:"Kč"},DKK:{currencySymbol:"kr",internationalCurrencySymbol:"kr"},DOP:{currencySymbol:"$",internationalCurrencySymbol:"$"},DZD:{currencySymbol:"د.ج",internationalCurrencySymbol:"د.ج"},EGP:{currencySymbol:"E£",internationalCurrencySymbol:"E£"},ETB:{currencySymbol:"ብር",internationalCurrencySymbol:"ብር"},EUR:{currencySymbol:"€",internationalCurrencySymbol:"€"},FJD:{currencySymbol:"$",internationalCurrencySymbol:"$"},GBP:{currencySymbol:"£",internationalCurrencySymbol:"£"},GEL:{currencySymbol:"ლ,",internationalCurrencySymbol:"ლ,"},GHS:{currencySymbol:"₵",internationalCurrencySymbol:"₵"},GIP:{currencySymbol:"£",internationalCurrencySymbol:"£"},GMD:{currencySymbol:"D",internationalCurrencySymbol:"D"},GTQ:{currencySymbol:"Q",internationalCurrencySymbol:"Q"},GYD:{currencySymbol:"$",internationalCurrencySymbol:"$"},HKD:{currencySymbol:"$",internationalCurrencySymbol:"$"},HNL:{currencySymbol:"L",internationalCurrencySymbol:"L"},HRK:{currencySymbol:"kn",internationalCurrencySymbol:"kn"},HTG:{currencySymbol:"G",internationalCurrencySymbol:"G"},HUF:{currencySymbol:"Ft",internationalCurrencySymbol:"Ft"},IDR:{currencySymbol:"Rp",internationalCurrencySymbol:"Rp"},ILS:{currencySymbol:"₪",internationalCurrencySymbol:"₪"},INR:{currencySymbol:"₹",internationalCurrencySymbol:"₹"},ISK:{currencySymbol:"kr",internationalCurrencySymbol:"kr"},JMD:{currencySymbol:"$",internationalCurrencySymbol:"$"},JOD:{currencySymbol:"د.ا",internationalCurrencySymbol:"د.ا",minimumFractionDigits:3,maximumFractionDigits:3},JPY:{currencySymbol:"¥",internationalCurrencySymbol:"¥",minimumFractionDigits:0,maximumFractionDigits:0},KES:{currencySymbol:"KSh",internationalCurrencySymbol:"KSh"},KGS:{currencySymbol:"som",internationalCurrencySymbol:"som"},KHR:{currencySymbol:"៛",internationalCurrencySymbol:"៛"},KRW:{currencySymbol:"₩",internationalCurrencySymbol:"₩",minimumFractionDigits:0,maximumFractionDigits:0},KWD:{currencySymbol:"د.ك",internationalCurrencySymbol:"د.ك",minimumFractionDigits:3,maximumFractionDigits:3},KYD:{currencySymbol:"$",internationalCurrencySymbol:"$"},KZT:{currencySymbol:"〒",internationalCurrencySymbol:"〒"},LAK:{currencySymbol:"₭",internationalCurrencySymbol:"₭"},LBP:{currencySymbol:"ل.ل",internationalCurrencySymbol:"ل.ل"},LKR:{currencySymbol:"₨",internationalCurrencySymbol:"₨"},LRD:{currencySymbol:"$",internationalCurrencySymbol:"$"},LTL:{currencySymbol:"Lt",internationalCurrencySymbol:"Lt"},MAD:{currencySymbol:"د.م.",internationalCurrencySymbol:"د.م."},MDL:{currencySymbol:"L",internationalCurrencySymbol:"L"},MGA:{currencySymbol:"Ar",internationalCurrencySymbol:"Ar",minimumFractionDigits:0,maximumFractionDigits:0},MKD:{currencySymbol:"ден",internationalCurrencySymbol:"ден"},MMK:{currencySymbol:"K",internationalCurrencySymbol:"K"},MNT:{currencySymbol:"₮",internationalCurrencySymbol:"₮"},MOP:{currencySymbol:"P",internationalCurrencySymbol:"P"},MRO:{currencySymbol:"UM",internationalCurrencySymbol:"UM",minimumFractionDigits:0,maximumFractionDigits:0},MUR:{currencySymbol:"₨",internationalCurrencySymbol:"₨"},MWK:{currencySymbol:"MK",internationalCurrencySymbol:"MK"},MXN:{currencySymbol:"$",internationalCurrencySymbol:"$"},MYR:{currencySymbol:"RM",internationalCurrencySymbol:"RM"},MZN:{currencySymbol:"MTn",internationalCurrencySymbol:"MTn"},NAD:{currencySymbol:"$",internationalCurrencySymbol:"$"},NGN:{currencySymbol:"₦",internationalCurrencySymbol:"₦"},NIO:{currencySymbol:"C$",internationalCurrencySymbol:"C$"},NOK:{currencySymbol:"kr",internationalCurrencySymbol:"kr"},NPR:{currencySymbol:"₨",internationalCurrencySymbol:"₨"},NZD:{currencySymbol:"$",internationalCurrencySymbol:"$"},OMR:{currencySymbol:"ر.ع.",internationalCurrencySymbol:"ر.ع.",minimumFractionDigits:3,maximumFractionDigits:3},PAB:{currencySymbol:"B/.",internationalCurrencySymbol:"B/."},PEN:{currencySymbol:"S/.",internationalCurrencySymbol:"S/."},PGK:{currencySymbol:"K",internationalCurrencySymbol:"K"},PHP:{currencySymbol:"₱",internationalCurrencySymbol:"₱"},PKR:{currencySymbol:"₨",internationalCurrencySymbol:"₨"},PLN:{currencySymbol:"zł",internationalCurrencySymbol:"zł"},PYG:{currencySymbol:"₲",internationalCurrencySymbol:"₲"},QAR:{currencySymbol:"ر.ق",internationalCurrencySymbol:"ر.ق"},RON:{currencySymbol:"Lei",internationalCurrencySymbol:"Lei"},RSD:{currencySymbol:"РСД",internationalCurrencySymbol:"РСД"},RUB:{currencySymbol:"₽",internationalCurrencySymbol:"₽"},RWF:{currencySymbol:"FRw",internationalCurrencySymbol:"FRw"},SAR:{currencySymbol:"ر.س",internationalCurrencySymbol:"ر.س"},SBD:{currencySymbol:"$",internationalCurrencySymbol:"$"},SCR:{currencySymbol:"₨",internationalCurrencySymbol:"₨"},SEK:{currencySymbol:"kr",internationalCurrencySymbol:"kr"},SGD:{currencySymbol:"S$",internationalCurrencySymbol:"S$"},SLL:{currencySymbol:"Le",internationalCurrencySymbol:"Le"},SRD:{currencySymbol:"$",internationalCurrencySymbol:"$"},STD:{currencySymbol:"Db",internationalCurrencySymbol:"Db"},SVC:{currencySymbol:"₡",internationalCurrencySymbol:"₡"},SZL:{currencySymbol:"E",internationalCurrencySymbol:"E"},THB:{currencySymbol:"฿",internationalCurrencySymbol:"฿"},TJS:{currencySymbol:"ЅМ",internationalCurrencySymbol:"ЅМ"},TMT:{currencySymbol:"m",internationalCurrencySymbol:"m"},TND:{currencySymbol:"د.ت",internationalCurrencySymbol:"د.ت",minimumFractionDigits:3,maximumFractionDigits:3},TRY:{currencySymbol:"₺",internationalCurrencySymbol:"₺"},TTD:{currencySymbol:"$",internationalCurrencySymbol:"$"},TWD:{currencySymbol:"$",internationalCurrencySymbol:"$"},TZS:{currencySymbol:"Sh",internationalCurrencySymbol:"Sh"},UAH:{currencySymbol:"₴",internationalCurrencySymbol:"₴"},UGX:{currencySymbol:"USh",internationalCurrencySymbol:"USh"},USD:{currencySymbol:"$",internationalCurrencySymbol:"US$"},UYU:{currencySymbol:"$",internationalCurrencySymbol:"$"},UZS:{currencySymbol:"лв",internationalCurrencySymbol:"лв"},VEF:{currencySymbol:"Bs F",internationalCurrencySymbol:"Bs F"},VND:{currencySymbol:"₫",internationalCurrencySymbol:"₫",minimumFractionDigits:0,maximumFractionDigits:0},XAF:{currencySymbol:"Fr",internationalCurrencySymbol:"Fr"},XCD:{currencySymbol:"$",internationalCurrencySymbol:"$"},XOF:{currencySymbol:"Fr",internationalCurrencySymbol:"Fr"},YER:{currencySymbol:"﷼",internationalCurrencySymbol:"﷼"},ZAR:{currencySymbol:"R",internationalCurrencySymbol:"R"},ZMW:{currencySymbol:"ZMK",internationalCurrencySymbol:"ZMK"}};exports["default"]=NumberFormatter;module.exports=exports["default"]},{"./formatter":15,"./number_formatter_settings_formatter":18,"./utils":23,stround:3}],18:[function(_dereq_,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;desc=parent=getter=undefined;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x=parent;_x2=property;_x3=receiver;_again=true;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _formatter=_dereq_("./formatter");var _formatter2=_interopRequireDefault(_formatter);var NumberFormatterSettings=function NumberFormatterSettings(){_classCallCheck(this,NumberFormatterSettings);this.alwaysShowsDecimalSeparator=false;this.groupingSize=0;this.maximumFractionDigits=0;this.minimumFractionDigits=0;this.minimumIntegerDigits=0;this.prefix="";this.suffix="";this.usesGroupingSeparator=false};function chars(character,length){return new Array(length+1).join(character)}var DIGIT="#";var PADDING="0";var DECIMAL_SEPARATOR=".";var GROUPING_SEPARATOR=",";var NumberFormatterSettingsFormatter=function(_Formatter){_inherits(NumberFormatterSettingsFormatter,_Formatter);function NumberFormatterSettingsFormatter(){_classCallCheck(this,NumberFormatterSettingsFormatter);_get(Object.getPrototypeOf(NumberFormatterSettingsFormatter.prototype),"constructor",this).apply(this,arguments)}_createClass(NumberFormatterSettingsFormatter,[{key:"format",value:function format(settings){var result="";var minimumIntegerDigits=settings.minimumIntegerDigits;if(minimumIntegerDigits!==0){result+=chars(PADDING,minimumIntegerDigits)}result=DIGIT+result;if(settings.usesGroupingSeparator){while(result.length<=settings.groupingSize){result=DIGIT+result}result=result.slice(0,-settings.groupingSize)+GROUPING_SEPARATOR+result.slice(-settings.groupingSize)}var minimumFractionDigits=settings.minimumFractionDigits;var maximumFractionDigits=settings.maximumFractionDigits;var hasFractionalPart=settings.alwaysShowsDecimalSeparator||minimumFractionDigits>0||maximumFractionDigits>0;if(hasFractionalPart){result+=DECIMAL_SEPARATOR;for(var i=0,_length=maximumFractionDigits;i<_length;i++){result+=i<minimumFractionDigits?PADDING:DIGIT}}return settings.prefix+result+settings.suffix}},{key:"parse",value:function parse(string){var result=new NumberFormatterSettings;var hasPassedPrefix=false;var hasStartedSuffix=false;var decimalSeparatorIndex=null;var groupingSeparatorIndex=null;var lastIntegerDigitIndex=null;for(var i=0,length=string.length;i<length;i++){var c=string[i];switch(c){case DIGIT:if(hasStartedSuffix){return null}hasPassedPrefix=true;if(decimalSeparatorIndex!==null){result.maximumFractionDigits++}break;case PADDING:if(hasStartedSuffix){return null}hasPassedPrefix=true;if(decimalSeparatorIndex===null){result.minimumIntegerDigits++}else{result.minimumFractionDigits++;result.maximumFractionDigits++}break;case DECIMAL_SEPARATOR:if(hasStartedSuffix){return null}hasPassedPrefix=true;decimalSeparatorIndex=i;lastIntegerDigitIndex=i-1;break;case GROUPING_SEPARATOR:if(hasStartedSuffix){return null}hasPassedPrefix=true;groupingSeparatorIndex=i;break;default:if(hasPassedPrefix){hasStartedSuffix=true;result.suffix+=c}else{result.prefix+=c}}}if(decimalSeparatorIndex===null){lastIntegerDigitIndex=length-1}if(decimalSeparatorIndex===length-1){result.alwaysShowsDecimalSeparator=true}if(groupingSeparatorIndex!==null){result.groupingSize=lastIntegerDigitIndex-groupingSeparatorIndex;result.usesGroupingSeparator=true}return result}}]);return NumberFormatterSettingsFormatter}(_formatter2["default"]);exports["default"]=NumberFormatterSettingsFormatter;module.exports=exports["default"]},{"./formatter":15}],19:[function(_dereq_,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;desc=parent=getter=undefined;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x=parent;_x2=property;_x3=receiver;_again=true;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _delimited_text_formatter=_dereq_("./delimited_text_formatter");var _delimited_text_formatter2=_interopRequireDefault(_delimited_text_formatter);var NANPPhoneDelimiters={0:"(",4:")",5:" ",9:"-"};var NANPPhoneDelimitersWithOne={1:" ",2:"(",6:")",7:" ",11:"-"};var NANPPhoneDelimitersWithPlus={2:" ",3:"(",7:")",8:" ",12:"-"};var DELIMITER_PATTERN=/[-\(\) ]/g;var PhoneFormatter=function(_DelimitedTextFormatter){_inherits(PhoneFormatter,_DelimitedTextFormatter);function PhoneFormatter(){_classCallCheck(this,PhoneFormatter);_get(Object.getPrototypeOf(PhoneFormatter.prototype),"constructor",this).call(this);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}if(args.length!==0){throw new Error("were you trying to set a delimiter ("+args[0]+")?")}}_createClass(PhoneFormatter,[{key:"isDelimiter",value:function isDelimiter(chr){var map=this.delimiterMap;for(var index in map){if(map.hasOwnProperty(index)){if(map[index]===chr){return true}}}return false}},{key:"delimiterAt",value:function delimiterAt(index){return this.delimiterMap[index]}},{key:"hasDelimiterAtIndex",value:function hasDelimiterAtIndex(index){var delimiter=this.delimiterAt(index);return delimiter!==undefined&&delimiter!==null}},{key:"parse",value:function parse(text,error){if(!error){error=function(){}}var digits=this.digitsWithoutCountryCode(text);if(text.length<10){error("phone-formatter.number-too-short")}if(digits[0]==="0"){error("phone-formatter.area-code-zero")}if(digits[0]==="1"){error("phone-formatter.area-code-one")}if(digits[1]==="9"){error("phone-formatter.area-code-n9n")}if(digits[3]==="1"){error("phone-formatter.central-office-one")}if(digits.slice(4,6)==="11"){error("phone-formatter.central-office-n11")}return _get(Object.getPrototypeOf(PhoneFormatter.prototype),"parse",this).call(this,text,error)}},{key:"format",value:function format(value){this.guessFormatFromText(value);return _get(Object.getPrototypeOf(PhoneFormatter.prototype),"format",this).call(this,this.removeDelimiterMapChars(value))}},{key:"isChangeValid",value:function isChangeValid(change,error){this.guessFormatFromText(change.proposed.text);if(change.inserted.text.length>1){var text=change.current.text;var selectedRange=change.current.selectedRange;var toInsert=change.inserted.text;var formatted=this.format((text.slice(0,selectedRange.start)+toInsert+text.slice(selectedRange.start+selectedRange.length)).replace(/[^\d]/g,""));change.proposed={text:formatted,selectedRange:{start:formatted.length-(text.length-(selectedRange.start+selectedRange.length)),length:0}};return _get(Object.getPrototypeOf(PhoneFormatter.prototype),"isChangeValid",this).call(this,change,error)}if(/^\d*$/.test(change.inserted.text)||change.proposed.text.indexOf("+")===0){return _get(Object.getPrototypeOf(PhoneFormatter.prototype),"isChangeValid",this).call(this,change,error)}else{return false}}},{key:"guessFormatFromText",value:function guessFormatFromText(text){if(text&&text[0]==="+"){this.delimiterMap=NANPPhoneDelimitersWithPlus;this.maximumLength=1+1+10+5}else if(text&&text[0]==="1"){this.delimiterMap=NANPPhoneDelimitersWithOne;this.maximumLength=1+10+5}else{this.delimiterMap=NANPPhoneDelimiters;this.maximumLength=10+4}}},{key:"digitsWithoutCountryCode",value:function digitsWithoutCountryCode(text){var digits=(text||"").replace(/[^\d]/g,"");var extraDigits=digits.length-10;if(extraDigits>0){digits=digits.substr(extraDigits)}return digits}},{key:"removeDelimiterMapChars",value:function removeDelimiterMapChars(text){return(text||"").replace(DELIMITER_PATTERN,"")}}]);return PhoneFormatter}(_delimited_text_formatter2["default"]);exports["default"]=PhoneFormatter;module.exports=exports["default"]},{"./delimited_text_formatter":11}],20:[function(_dereq_,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;desc=parent=getter=undefined;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x=parent;_x2=property;_x3=receiver;_again=true;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _delimited_text_formatter=_dereq_("./delimited_text_formatter");var _delimited_text_formatter2=_interopRequireDefault(_delimited_text_formatter);var DIGITS_PATTERN=/^\d*$/;var SocialSecurityNumberFormatter=function(_DelimitedTextFormatter){_inherits(SocialSecurityNumberFormatter,_DelimitedTextFormatter);function SocialSecurityNumberFormatter(){_classCallCheck(this,SocialSecurityNumberFormatter);_get(Object.getPrototypeOf(SocialSecurityNumberFormatter.prototype),"constructor",this).call(this,"-");this.maximumLength=9+2}_createClass(SocialSecurityNumberFormatter,[{key:"hasDelimiterAtIndex",value:function hasDelimiterAtIndex(index){return index===3||index===6}},{key:"isChangeValid",value:function isChangeValid(change,error){if(DIGITS_PATTERN.test(change.inserted.text)){return _get(Object.getPrototypeOf(SocialSecurityNumberFormatter.prototype),"isChangeValid",this).call(this,change,error)}else{return false}}}]);return SocialSecurityNumberFormatter}(_delimited_text_formatter2["default"]);exports["default"]=SocialSecurityNumberFormatter;module.exports=exports["default"]},{"./delimited_text_formatter":11}],21:[function(_dereq_,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;desc=parent=getter=undefined;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x=parent;_x2=property;_x3=receiver;_again=true;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _formatter=_dereq_("./formatter");var _formatter2=_interopRequireDefault(_formatter);var _undo_manager=_dereq_("./undo_manager");var _undo_manager2=_interopRequireDefault(_undo_manager);var _utils=_dereq_("./utils");var _caret=_dereq_("./caret");var _caret2=_interopRequireDefault(_caret);var _inputSim=_dereq_("input-sim");_dereq_("vanilla-autofill-event");var _installCaret=(0,_caret2["default"])();var getCaret=_installCaret.getCaret;var setCaret=_installCaret.setCaret;var TextField=function(_Input){_inherits(TextField,_Input);function TextField(element,formatter){_classCallCheck(this,TextField);_get(Object.getPrototypeOf(TextField.prototype),"constructor",this).call(this);var caret=getCaret(element);if(typeof element.get==="function"){console.warn("DEPRECATION: FieldKit.TextField instances should no longer be "+"created with a jQuery-wrapped element.");element=element.get(0)}this.element=element;this._formatter=formatter;this._enabled=true;this._manualCaret={start:0,end:0};this._placeholder=null;this._disabledPlaceholder=null;this._focusedPlaceholder=null;this._unfocusedPlaceholder=null;this._isDirty=false;this._valueOnFocus="";this._currentValue="";this._needsKeyUpTextDidChangeTrigger=false;this._blur=(0,_utils.bind)(this._blur,this);this._change=(0,_utils.bind)(this._change,this);this._focus=(0,_utils.bind)(this._focus,this);this._click=(0,_utils.bind)(this._click,this);this._paste=(0,_utils.bind)(this._paste,this);this._keyUp=(0,_utils.bind)(this._keyUp,this);this._keyPress=(0,_utils.bind)(this._keyPress,this);this._keyDown=(0,_utils.bind)(this._keyDown,this);if(element["field-kit-text-field"]){throw new Error("already attached a TextField to this element")}else{element["field-kit-text-field"]=this}element.addEventListener("keydown",this._keyDown);element.addEventListener("keypress",this._keyPress);element.addEventListener("keyup",this._keyUp);element.addEventListener("click",this._click);element.addEventListener("paste",this._paste);element.addEventListener("focus",this._focus);element.addEventListener("blur",this._blur);element.addEventListener("change",this._change);if(!element.getAttribute("autocapitalize")){element.setAttribute("autocapitalize","off")}var window=element.ownerDocument.defaultView;this._needsManualCaret=window.navigator.userAgent.toLowerCase().indexOf("android")>-1;this.setText(element.value);this.setSelectedRange({start:caret.start,length:caret.end-caret.start})}_createClass(TextField,[{key:"textDidChange",value:function textDidChange(){}},{key:"textFieldDidEndEditing",value:function textFieldDidEndEditing(){}},{key:"textFieldDidBeginEditing",value:function textFieldDidBeginEditing(){}},{key:"_textDidChange",value:function _textDidChange(){var delegate=this._delegate;this.textDidChange();if(delegate&&typeof delegate.textDidChange==="function"){delegate.textDidChange(this)}this._fireEvent("input")}},{key:"_textFieldDidEndEditing",value:function _textFieldDidEndEditing(){var delegate=this._delegate;this.textFieldDidEndEditing();if(delegate&&typeof delegate.textFieldDidEndEditing==="function"){delegate.textFieldDidEndEditing(this)}if(this._isDirty&&this._valueOnFocus!==this.element.value){this._fireEvent("change")}this._isDirty=false;this._valueOnFocus=""}},{key:"_textFieldDidBeginEditing",value:function _textFieldDidBeginEditing(){var delegate=this._delegate;this.textFieldDidBeginEditing();if(delegate&&typeof delegate.textFieldDidBeginEditing==="function"){delegate.textFieldDidBeginEditing(this)}}},{key:"delegate",value:function delegate(){return this._delegate}},{key:"setDelegate",value:function setDelegate(delegate){this._delegate=delegate}},{key:"destroy",value:function destroy(){var element=this.element;element.removeEventListener("keydown",this._keyDown);element.removeEventListener("keypress",this._keyPress);element.removeEventListener("keyup",this._keyUp);element.removeEventListener("click",this._click);element.removeEventListener("paste",this._paste);element.removeEventListener("focus",this._focus);element.removeEventListener("blur",this._blur);element.removeEventListener("change",this._change);delete element["field-kit-text-field"]}},{key:"formatter",value:function formatter(){if(!this._formatter){this._formatter=new _formatter2["default"];var maximumLengthString=this.element.getAttribute("maxlength");if(maximumLengthString!==undefined&&maximumLengthString!==null){this._formatter.maximumLength=parseInt(maximumLengthString,10)}}return this._formatter}},{key:"setFormatter",value:function setFormatter(formatter){var value=this.value();this._formatter=formatter;this.setValue(value)}},{key:"hasChangesAndIsValid",value:function hasChangesAndIsValid(current,proposed){var _this=this;var change=new TextFieldStateChange(this);var error=function error(errorType){var delegate=_this.delegate();if(delegate){if(typeof delegate.textFieldDidFailToValidateChange==="function"){delegate.textFieldDidFailToValidateChange(_this,change,errorType)}}};change.current={text:current.text,selectedRange:current.selectedRange};change.proposed={text:proposed.text,selectedRange:proposed.selectedRange};if(change.hasChanges()&&this.formatter().isChangeValid(change,error)){return change}return null}},{key:"insertNewline",value:function insertNewline(){this._textFieldDidEndEditing();this._didEndEditingButKeptFocus=true}},{key:"inspect",value:function inspect(){return'#<TextField text="'+this.text()+'">'}},{key:"readSelectionFromPasteboard",value:function readSelectionFromPasteboard(pasteboard){var range=undefined,text=undefined;text=pasteboard.getData("Text");this.replaceSelection(text);range=this.selectedRange();range.start+=range.length;range.length=0;this.setSelectedRange(range)}},{key:"rollbackInvalidChanges",value:function rollbackInvalidChanges(callback){var result=null;var errorType=null;var change=TextFieldStateChange.build(this,function(){return result=callback()});var error=function error(type){errorType=type};if(change.hasChanges()){var formatter=this.formatter();if(formatter&&typeof formatter.isChangeValid==="function"){if(!this._isDirty){this._valueOnFocus=change.current.text||"";this._isDirty=true}if(formatter.isChangeValid(change,error)){change.recomputeDiff();this.setText(change.proposed.text);this.setSelectedRange(change.proposed.selectedRange)}else{var delegate=this.delegate();if(delegate){if(typeof delegate.textFieldDidFailToValidateChange==="function"){delegate.textFieldDidFailToValidateChange(this,change,errorType)}}this.setText(change.current.text);this.setSelectedRange(change.current.selectedRange);return result}}if(change.inserted.text.length||change.deleted.text.length){this.undoManager().proxyFor(this)._applyChangeFromUndoManager(change);this._textDidChange()}}return result}},{key:"value",value:function value(){var _this2=this;var text=this.text();var delegate=this.delegate();var formatter=this.formatter();if(!formatter){return text}return formatter.parse(text,function(errorType){if(delegate){if(typeof delegate.textFieldDidFailToParseString==="function"){delegate.textFieldDidFailToParseString(_this2,text,errorType)}}})}},{key:"setValue",value:function setValue(value){if(this._formatter){value=this._formatter.format(value)}this.setText(""+value)}},{key:"text",value:function text(){return this.element.value}},{key:"setText",value:function setText(text){this.element.value=text;this._currentValue=text}},{key:"selectedRange",value:function selectedRange(){var caret=this._needsManualCaret?this._manualCaret:getCaret(this.element);return{start:caret.start,length:caret.end-caret.start}}},{key:"setSelectedRangeWithAffinity",value:function setSelectedRangeWithAffinity(range,affinity){var newRange=_get(Object.getPrototypeOf(TextField.prototype),"setSelectedRangeWithAffinity",this).call(this,range,affinity);var caret={start:newRange.start,end:newRange.start+newRange.length};this._manualCaret=caret;setCaret(this.element,caret.start,caret.end);this.selectionAffinity=range.length===0?null:affinity}},{key:"allowsUndo",value:function allowsUndo(){return this._allowsUndo}},{key:"setAllowsUndo",value:function setAllowsUndo(allowsUndo){this._allowsUndo=allowsUndo}},{key:"redo",value:function redo(event){if(this.undoManager().canRedo()){this.undoManager().redo()}event.preventDefault()}},{key:"undo",value:function undo(event){if(this.undoManager().canUndo()){this.undoManager().undo()}event.preventDefault()}},{key:"undoManager",value:function undoManager(){return this._undoManager||(this._undoManager=new _undo_manager2["default"])}},{key:"becomeFirstResponder",value:function becomeFirstResponder(){var _this3=this;this.element.focus();this.rollbackInvalidChanges(function(){_this3.element.select();_this3._syncPlaceholder()})}},{key:"hasFocus",value:function hasFocus(){return this.element.ownerDocument.activeElement===this.element}},{key:"isEnabled",value:function isEnabled(){return this._enabled}},{key:"setEnabled",value:function setEnabled(enabled){this._enabled=enabled;this._syncPlaceholder()}},{key:"resignFirstResponder",value:function resignFirstResponder(event){if(event!==undefined&&event!==null){event.preventDefault()}this.element.blur();this._syncPlaceholder()}},{key:"disabledPlaceholder",value:function disabledPlaceholder(){return this._disabledPlaceholder}},{key:"setDisabledPlaceholder",value:function setDisabledPlaceholder(disabledPlaceholder){this._disabledPlaceholder=disabledPlaceholder;this._syncPlaceholder()}},{key:"focusedPlaceholder",value:function focusedPlaceholder(){return this._focusedPlaceholder}},{key:"setFocusedPlaceholder",value:function setFocusedPlaceholder(focusedPlaceholder){this._focusedPlaceholder=focusedPlaceholder;this._syncPlaceholder()}},{key:"placeholder",value:function placeholder(){
return this._placeholder}},{key:"setPlaceholder",value:function setPlaceholder(placeholder){this._placeholder=placeholder;this.element.setAttribute("placeholder",this._placeholder)}},{key:"unfocusedPlaceholder",value:function unfocusedPlaceholder(){return this._unfocusedPlaceholder}},{key:"setUnfocusedPlaceholder",value:function setUnfocusedPlaceholder(unfocusedPlaceholder){this._unfocusedPlaceholder=unfocusedPlaceholder;this._syncPlaceholder()}},{key:"_applyChangeFromUndoManager",value:function _applyChangeFromUndoManager(change){this.undoManager().proxyFor(this)._applyChangeFromUndoManager(change);if(this.undoManager().isUndoing()){this.setText(change.current.text);this.setSelectedRange(change.current.selectedRange)}else{this.setText(change.proposed.text);this.setSelectedRange(change.proposed.selectedRange)}this._textDidChange()}},{key:"_click",value:function _click(){this._manualCaret=getCaret(this.element);this._selectedRange={start:this._manualCaret.start,length:this._manualCaret.end-this._manualCaret.start};this.selectionAffinity=null}},{key:"_fireEvent",value:function _fireEvent(eventType){var document=this.element.ownerDocument;var window=document.defaultView;if(typeof window.CustomEvent==="function"){this.element.dispatchEvent(new window.CustomEvent(eventType,{}))}else{var _event=document.createEvent("Event");_event.initEvent(eventType,false,false);this.element.dispatchEvent(_event)}}},{key:"_focus",value:function _focus(){this._textFieldDidBeginEditing();this._syncPlaceholder()}},{key:"_blur",value:function _blur(){this._textFieldDidEndEditing();this._syncPlaceholder()}},{key:"_change",value:function _change(){if(this._formatter)this.setValue(this._formatter.format(this.value()))}},{key:"_keyDown",value:function _keyDown(event){var _this4=this;if(this._didEndEditingButKeptFocus){this._textFieldDidBeginEditing();this._didEndEditingButKeptFocus=false}var action=this._bindings.actionForEvent(event);if(action){switch(action){case"undo":case"redo":this[action](event);break;default:this.rollbackInvalidChanges(function(){return _this4[action](event)});break}}}},{key:"_keyPress",value:function _keyPress(event){var _this5=this;var keyCode=event.keyCode;if(!event.metaKey&&!event.ctrlKey&&keyCode!==_inputSim.KEYS.ENTER&&keyCode!==_inputSim.KEYS.TAB&&keyCode!==_inputSim.KEYS.BACKSPACE){if(event.charCode!==0){(function(){var newText=String.fromCharCode(event.charCode||event.keyCode);_this5._processChange({currentText:_this5.text(),proposedText:(0,_utils.replaceStringSelection)(newText,_this5.text(),_this5.selectedRange()),onSuccess:function onSuccess(change,changeTriggeredFormatting){if(!changeTriggeredFormatting&&event instanceof KeyboardEvent){if(!_this5._isDirty){_this5._valueOnFocus=change.current.text||"";_this5._isDirty=true}_this5.undoManager().proxyFor(_this5)._applyChangeFromUndoManager(change);_this5._manualCaret={start:change.proposed.selectedRange.start,end:change.proposed.selectedRange.start+change.proposed.selectedRange.length};_this5._needsKeyUpTextDidChangeTrigger=true}else{event.preventDefault();_this5.rollbackInvalidChanges(function(){return _this5.insertText(newText)})}_this5._currentValue=change.proposed.text},onFail:function onFail(){event.preventDefault();_this5.rollbackInvalidChanges(function(){return _this5.insertText(newText)})}})})()}else{event.preventDefault()}}}},{key:"_keyUp",value:function _keyUp(event){var _this6=this;if(this._needsKeyUpTextDidChangeTrigger){this._textDidChange();this._needsKeyUpTextDidChangeTrigger=false}var keyCode=event.keyCode;if(keyCode===229){(function(){var previousText=_this6._currentValue||"";_this6._processChange({currentText:previousText,proposedText:_this6.text(),onSuccess:function onSuccess(change,changeTriggeredFormatting){if(changeTriggeredFormatting){var newText=change.proposed.text;_this6.setSelectedRange(change.proposed.selectedRange);_this6.setText(newText)}if(!_this6._isDirty){_this6._valueOnFocus=change.current.text||"";_this6._isDirty=true}_this6.undoManager().proxyFor(_this6)._applyChangeFromUndoManager(change);_this6._textDidChange();_this6._currentValue=change.proposed.text},onFail:function onFail(){_this6.setText(previousText)}})})()}else{this.rollbackInvalidChanges(function(){if(event.keyCode===_inputSim.KEYS.TAB){_this6.selectAll(event)}})}}},{key:"_processChange",value:function _processChange(_ref){var currentText=_ref.currentText;var proposedText=_ref.proposedText;var onSuccess=_ref.onSuccess;var _ref$onFail=_ref.onFail;var onFail=_ref$onFail===undefined?function(){}:_ref$onFail;var current={text:currentText,selectedRange:this.selectedRange()};var proposed={text:proposedText,selectedRange:{start:current.selectedRange.start+1,length:0}};var change=this.hasChangesAndIsValid(current,proposed);var changeTriggeredFormatting=change&&(change.proposed.text!==proposed.text||change.proposed.selectedRange.start!==proposed.selectedRange.start||change.proposed.selectedRange.length!==proposed.selectedRange.length);if(change){onSuccess(change,changeTriggeredFormatting)}else{onFail()}}},{key:"_paste",value:function _paste(event){var _this7=this;event.preventDefault();this.rollbackInvalidChanges(function(){_this7.readSelectionFromPasteboard(event.clipboardData)})}},{key:"_syncPlaceholder",value:function _syncPlaceholder(){if(!this._enabled){var disabledPlaceholder=this._disabledPlaceholder;if(disabledPlaceholder!==undefined&&disabledPlaceholder!==null){this.setPlaceholder(disabledPlaceholder)}}else if(this.hasFocus()){var focusedPlaceholder=this._focusedPlaceholder;if(focusedPlaceholder!==undefined&&focusedPlaceholder!==null){this.setPlaceholder(focusedPlaceholder)}}else{var unfocusedPlaceholder=this._unfocusedPlaceholder;if(unfocusedPlaceholder!==undefined&&unfocusedPlaceholder!==null){this.setPlaceholder(unfocusedPlaceholder)}}}}]);return TextField}(_inputSim.Input);var TextFieldStateChange=function(){function TextFieldStateChange(field){_classCallCheck(this,TextFieldStateChange);this.field=field}_createClass(TextFieldStateChange,[{key:"hasChanges",value:function hasChanges(){this.recomputeDiff();return this.current.text!==this.proposed.text||this.current.selectedRange.start!==this.proposed.selectedRange.start||this.current.selectedRange.length!==this.proposed.selectedRange.length}},{key:"recomputeDiff",value:function recomputeDiff(){if(this.proposed.text!==this.current.text){var ctext=this.current.text;var ptext=this.proposed.text;var sharedPrefixLength=0;var sharedSuffixLength=0;var minTextLength=Math.min(ctext.length,ptext.length);var i=undefined;for(i=0;i<minTextLength;i++){if(ptext[i]===ctext[i]){sharedPrefixLength=i+1}else{break}}for(i=0;i<minTextLength-sharedPrefixLength;i++){if(ptext[ptext.length-1-i]===ctext[ctext.length-1-i]){sharedSuffixLength=i+1}else{break}}var inserted={start:sharedPrefixLength,end:ptext.length-sharedSuffixLength};var deleted={start:sharedPrefixLength,end:ctext.length-sharedSuffixLength};inserted.text=ptext.substring(inserted.start,inserted.end);deleted.text=ctext.substring(deleted.start,deleted.end);this.inserted=inserted;this.deleted=deleted}else{this.inserted={start:this.proposed.selectedRange.start,end:this.proposed.selectedRange.start+this.proposed.selectedRange.length,text:""};this.deleted={start:this.current.selectedRange.start,end:this.current.selectedRange.start+this.current.selectedRange.length,text:""}}}}]);return TextFieldStateChange}();TextFieldStateChange.build=function(field,callback){var change=new this(field);change.current={text:field.text(),selectedRange:field.selectedRange()};callback();change.proposed={text:field.text(),selectedRange:field.selectedRange()};change.recomputeDiff();return change};exports["default"]=TextField;module.exports=exports["default"]},{"./caret":9,"./formatter":15,"./undo_manager":22,"./utils":23,"input-sim":2,"vanilla-autofill-event":4}],22:[function(_dereq_,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _utils=_dereq_("./utils");var UndoManager=function(){function UndoManager(){_classCallCheck(this,UndoManager);this._undos=[];this._redos=[];this._isUndoing=false;this._isRedoing=false}_createClass(UndoManager,[{key:"canUndo",value:function canUndo(){return this._undos.length!==0}},{key:"canRedo",value:function canRedo(){return this._redos.length!==0}},{key:"isUndoing",value:function isUndoing(){return this._isUndoing}},{key:"isRedoing",value:function isRedoing(){return this._isRedoing}},{key:"registerUndo",value:function registerUndo(target,selector){for(var _len=arguments.length,args=Array(_len>2?_len-2:0),_key=2;_key<_len;_key++){args[_key-2]=arguments[_key]}if(this._isUndoing){this._appendRedo.apply(this,[target,selector].concat(args))}else{if(!this._isRedoing){this._redos.length=0}this._appendUndo.apply(this,[target,selector].concat(args))}}},{key:"_appendUndo",value:function _appendUndo(target,selector){for(var _len2=arguments.length,args=Array(_len2>2?_len2-2:0),_key2=2;_key2<_len2;_key2++){args[_key2-2]=arguments[_key2]}this._undos.push({target:target,selector:selector,args:args})}},{key:"_appendRedo",value:function _appendRedo(target,selector){for(var _len3=arguments.length,args=Array(_len3>2?_len3-2:0),_key3=2;_key3<_len3;_key3++){args[_key3-2]=arguments[_key3]}this._redos.push({target:target,selector:selector,args:args})}},{key:"undo",value:function undo(){if(!this.canUndo()){throw new Error("there are no registered undos")}var data=this._undos.pop();var target=data.target;var selector=data.selector;var args=data.args;this._isUndoing=true;target[selector].apply(target,args);this._isUndoing=false}},{key:"redo",value:function redo(){if(!this.canRedo()){throw new Error("there are no registered redos")}var data=this._redos.pop();var target=data.target;var selector=data.selector;var args=data.args;this._isRedoing=true;target[selector].apply(target,args);this._isRedoing=false}},{key:"proxyFor",value:function proxyFor(target){var proxy={};var self=this;function proxyMethod(selector){return function(){for(var _len4=arguments.length,args=Array(_len4),_key4=0;_key4<_len4;_key4++){args[_key4]=arguments[_key4]}self.registerUndo.apply(self,[target,selector].concat(args))}}(0,_utils.getAllPropertyNames)(target).forEach(function(selector){if((0,_utils.hasGetter)(target,selector)){return}if(typeof target[selector]!=="function"){return}proxy[selector]=proxyMethod(selector)});return proxy}}]);return UndoManager}();exports["default"]=UndoManager;module.exports=exports["default"]},{"./utils":23}],23:[function(_dereq_,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isDigits=isDigits;exports.startsWith=startsWith;exports.endsWith=endsWith;exports.zpad=zpad;exports.zpad2=zpad2;exports.bind=bind;exports.replaceStringSelection=replaceStringSelection;exports.forEach=forEach;exports.hasGetter=hasGetter;exports.getAllPropertyNames=getAllPropertyNames;function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}else{return Array.from(arr)}}var DIGITS_PATTERN=/^\d*$/;var SURROUNDING_SPACE_PATTERN=/(^\s+|\s+$)/;function isDigits(string){return DIGITS_PATTERN.test(string)}function startsWith(prefix,string){return string.slice(0,prefix.length)===prefix}function endsWith(suffix,string){return string.slice(string.length-suffix.length)===suffix}var trim=typeof"".trim==="function"?function(string){return string.trim()}:function(string){return string.replace(SURROUNDING_SPACE_PATTERN,"")};exports.trim=trim;function zpad(length,n){var result=""+n;while(result.length<length){result="0"+result}return result}function zpad2(n){return zpad(2,n)}function bind(fn,context){return fn.bind(context)}if(!Function.prototype.bind){Function.prototype.bind=function(context){for(var _len=arguments.length,prependedArgs=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){prependedArgs[_key-1]=arguments[_key]}var self=this;return function(){for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2]}return self.apply(context,prependedArgs.concat(args))}}}function replaceStringSelection(replacement,text,range){var end=range.start+range.length;return text.substring(0,range.start)+replacement+text.substring(end)}var hasOwnProp=Object.prototype.hasOwnProperty;function forEach(iterable,iterator){if(iterable&&typeof iterable.forEach==="function"){iterable.forEach(iterator)}else if({}.toString.call(iterable)==="[object Array]"){for(var i=0,l=iterable.length;i<l;i++){iterator.call(null,iterable[i],i,iterable)}}else{for(var key in iterable){if(hasOwnProp.call(iterable,key)){iterator.call(null,iterable[key],key,iterable)}}}}var getOwnPropertyNames=function(){var getOwnPropertyNames=Object.getOwnPropertyNames;try{Object.getOwnPropertyNames({},"sq")}catch(e){getOwnPropertyNames=function(object){var result=[];for(var key in object){if(hasOwnProp.call(object,key)){result.push(key)}}return result}}return getOwnPropertyNames}();var getPrototypeOf=Object.getPrototypeOf||function(object){return object.__proto__};function hasGetter(object,property){try{Object.getOwnPropertyDescriptor({},"sq")}catch(e){return false}var descriptor=undefined;if(object&&object.constructor&&object.constructor.prototype){descriptor=Object.getOwnPropertyDescriptor(object.constructor.prototype,property)}if(!descriptor){descriptor=Object.getOwnPropertyDescriptor(object,property)}if(descriptor&&descriptor.get){return true}else{return false}}function getAllPropertyNames(object){if(object===null||object===undefined){return[]}var result=getOwnPropertyNames(object);var prototype=object.constructor&&object.constructor.prototype;while(prototype){result.push.apply(result,_toConsumableArray(getOwnPropertyNames(prototype)));prototype=getPrototypeOf(prototype)}return result}},{}]},{},[16])(16)});